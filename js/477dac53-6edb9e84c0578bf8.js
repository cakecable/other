"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{6307:function(e,t,r){let a;r.d(t,{D5:function(){return r5},Jx:function(){return G},UH:function(){return f.UH},vc:function(){return q}});var n,o,i,l,s,u,p,c,d,h,y=r(5230),f=r(5085),m=r(3158),g=r(4963),v=r(498),b=Object.defineProperty,x=e=>{throw TypeError(e)},w=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,S=(e,t,r)=>w(e,"symbol"!=typeof t?t+"":t,r),k=(e,t,r)=>t.has(e)||x("Cannot "+r),_=(e,t,r)=>(k(e,t,"read from private field"),r?r.call(e):t.get(e)),C=(e,t,r)=>t.has(e)?x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),L=(e,t,r,a)=>(k(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),z=(e,t,r)=>(k(e,t,"access private method"),r);let $={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...f.SQ};function A(){if(typeof navigator>"u"){let e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return(0,f.x$)(e)||$.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>(0,f.x$)(e)).filter(e=>e)[0]??$.LOCAL}let E={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:$.STYLE,secondaryLanguage:$.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(E);let M=(0,g.Z)();class T extends m{constructor(){super(...arguments),S(this,"primaryLanguage",E.primaryLanguage),S(this,"secondaryLanguage"),S(this,"session",!0),S(this,"caching",!0),S(this,"_unit","metric"),S(this,"_apiKey","")}set unit(e){this._unit=e,this.emit("unit",e)}get unit(){return this._unit}set apiKey(e){this._apiKey=e,f.vc.apiKey=e,this.emit("apiKey",e)}get apiKey(){return this._apiKey}set fetch(e){f.vc.fetch=e}get fetch(){return f.vc.fetch}}let q=new T,{addProtocol:I}=y,P="localcache_source",j="localcache",N="u">typeof caches;async function O(){return a||(a=await caches.open("maptiler_sdk")),a}let U=0;async function R(){let e=await O(),t=await e.keys();for(let r of t.slice(0,Math.max(t.length-1e3,0)))e.delete(r)}function F(e,t,r){let a=window.document.createElement(e);return void 0!==t&&(a.className=t),r&&r.appendChild(a),a}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function B(e,t){let r=null;try{r=new URL(e)}catch{return{url:e}}return r.host===E.maptilerApiHost&&(r.searchParams.has("key")||r.searchParams.append("key",q.apiKey),q.session&&r.searchParams.append("mtsid",M)),{url:function(e,t){if(N&&q.caching&&q.session&&e.host===E.maptilerApiHost){if("Source"===t&&e.href.includes("tiles.json"))return e.href.replace("https://",`${P}://`);if("Tile"===t||"Glyphs"===t)return e.href.replace("https://",`${j}://`)}return e.href}(r,t)}}function H(e){return(t,r)=>{if(null!=e){let a=e(t,r),n=B((null==a?void 0:a.url)??"",r);return{...a,...n}}return B(t,r)}}function V(e,t){return!(!Array.isArray(e)||2!==e.length||"get"!==e[0]||"string"!=typeof e[1]||t&&!e[1].startsWith("name:")||!t&&"name"!==e[1])}let G=class extends y.Marker{addTo(e){return super.addTo(e)}};class Z extends y.NavigationControl{onAdd(e){return super.onAdd(e)}}class W extends y.GeolocateControl{onAdd(e){return super.onAdd(e)}}class K extends y.LogoControl{onAdd(e){return super.onAdd(e)}}class J extends y.ScaleControl{onAdd(e){return super.onAdd(e)}}class Y extends y.FullscreenControl{onAdd(e){return super.onAdd(e)}}class X extends K{constructor(e={}){super(e),S(this,"logoURL",""),S(this,"linkURL",""),this.logoURL=e.logoURL??E.maptilerLogoURL,this.linkURL=e.linkURL??E.maptilerURL}onAdd(e){this._map=e,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";let t=window.document.createElement("a");return t.style.backgroundRepeat="no-repeat",t.style.cursor="pointer",t.style.display="block",t.style.height="23px",t.style.margin="0 0 -4px -4px",t.style.overflow="hidden",t.style.width="88px",t.style.backgroundImage=`url(${this.logoURL})`,t.style.backgroundSize="100px 30px",t.style.width="100px",t.style.height="30px",t.target="_blank",t.rel="noopener",t.href=this.linkURL,t.setAttribute("aria-label","MapTiler logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var Q={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class ee{constructor(e,t,r,a){this.message=(e?`${e}: `:"")+r,a&&(this.identifier=a),null!=t&&t.__line__&&(this.line=t.__line__)}}function et(e,...t){for(let r of t)for(let t in r)e[t]=r[t];return e}class er extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class ea{constructor(e,t=[]){for(let[r,a]of(this.parent=e,this.bindings={},t))this.bindings[r]=a}concat(e){return new ea(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}let en={kind:"null"},eo={kind:"number"},ei={kind:"string"},el={kind:"boolean"},es={kind:"color"},eu={kind:"object"},ep={kind:"value"},ec={kind:"collator"},ed={kind:"formatted"},eh={kind:"padding"},ey={kind:"resolvedImage"},ef={kind:"variableAnchorOffsetCollection"};function em(e,t){return{kind:"array",itemType:e,N:t}}function eg(e){if("array"!==e.kind)return e.kind;{let t=eg(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}}let ev=[en,eo,ei,el,es,ed,eu,em(ep),eh,ey,ef];function eb(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!eb(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){for(let e of ev)if(!eb(e,t))return null}}return`Expected ${eg(e)} but found ${eg(t)} instead.`}function ex(e,t){return t.some(t=>t.kind===e.kind)}function ew(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}function eS(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}let ek=4/29,e_=6/29,eC=6/29*3*(6/29),eL=6/29*(6/29)*(6/29),ez=Math.PI/180,e$=180/Math.PI;function eA(e){return(e%=360)<0&&(e+=360),e}function eE([e,t,r,a]){let n,o;let i=eT((.2225045*(e=eM(e))+.7168786*(t=eM(t))+.0606169*(r=eM(r)))/1);e===t&&t===r?n=o=i:(n=eT((.4360747*e+.3850649*t+.1430804*r)/.96422),o=eT((.0139322*e+.0971045*t+.7141733*r)/.82521));let l=116*i-16;return[l<0?0:l,500*(n-i),200*(i-o),a]}function eM(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function eT(e){return e>eL?Math.pow(e,1/3):e/eC+ek}function eq([e,t,r,a]){let n=(e+16)/116,o=isNaN(t)?n:n+t/500,i=isNaN(r)?n:n-r/200;return n=1*eP(n),[eI(3.1338561*(o=.96422*eP(o))-1.6168667*n-.4906146*(i=.82521*eP(i))),eI(-.9787684*o+1.9161415*n+.033454*i),eI(.0719453*o-.2289914*n+1.4052427*i),a]}function eI(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function eP(e){return e>e_?e*e*e:eC*(e-ek)}function ej(e){return parseInt(e.padEnd(2,e),16)/255}function eN(e,t){return eO(t?e/100:e,0,1)}function eO(e,t,r){return Math.min(Math.max(t,e),r)}function eU(e){return!e.some(Number.isNaN)}let eR={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class eF{constructor(e,t,r,a=1,n=!0){this.r=e,this.g=t,this.b=r,this.a=a,n||(this.r*=a,this.g*=a,this.b*=a,a||this.overwriteGetter("rgb",[e,t,r,a]))}static parse(e){if(e instanceof eF)return e;if("string"!=typeof e)return;let t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];let t=eR[e];if(t){let[e,r,a]=t;return[e/255,r/255,a/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){let t=e.length<6?1:2,r=1;return[ej(e.slice(r,r+=t)),ej(e.slice(r,r+=t)),ej(e.slice(r,r+=t)),ej(e.slice(r,r+t)||"ff")]}if(e.startsWith("rgb")){let t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){let[e,r,a,n,o,i,l,s,u,p,c,d]=t,h=[n||" ",l||" ",p].join("");if("  "===h||"  /"===h||",,"===h||",,,"===h){let e=[a,i,u].join(""),t="%%%"===e?100:""===e?255:0;if(t){let e=[eO(+r/t,0,1),eO(+o/t,0,1),eO(+s/t,0,1),c?eN(+c,d):1];if(eU(e))return e}}return}}let r=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(r){let[e,t,a,n,o,i,l,s,u]=r,p=[a||" ",o||" ",l].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){let e=[+t,eO(+n,0,100),eO(+i,0,100),s?eN(+s,u):1];if(eU(e))return function([e,t,r,a]){function n(a){let n=(a+e/30)%12,o=t*Math.min(r,1-r);return r-o*Math.max(-1,Math.min(n-3,9-n,1))}return e=eA(e),t/=100,r/=100,[n(0),n(8),n(4),a]}(e)}}}(e);if(t)return new eF(...t,!1)}get rgb(){let{r:e,g:t,b:r,a}=this,n=a||1/0;return this.overwriteGetter("rgb",[e/n,t/n,r/n,a])}get hcl(){return this.overwriteGetter("hcl",function(e){let[t,r,a,n]=eE(e),o=Math.sqrt(r*r+a*a);return[Math.round(1e4*o)?eA(Math.atan2(a,r)*e$):NaN,o,t,n]}(this.rgb))}get lab(){return this.overwriteGetter("lab",eE(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){let[e,t,r,a]=this.rgb;return`rgba(${[e,t,r].map(e=>Math.round(255*e)).join(",")},${a})`}}eF.black=new eF(0,0,0,1),eF.white=new eF(1,1,1,1),eF.transparent=new eF(0,0,0,0),eF.red=new eF(1,0,0,1);class eD{constructor(e,t,r){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class eB{constructor(e,t,r,a,n){this.text=e,this.image=t,this.scale=r,this.fontStack=a,this.textColor=n}}class eH{constructor(e){this.sections=e}static fromString(e){return new eH([new eB(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof eH?e:eH.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}}class eV{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof eV)return e;if("number"==typeof e)return new eV([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(let t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new eV(e)}}toString(){return JSON.stringify(this.values)}}let eG=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class eZ{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof eZ)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!=0)){for(let t=0;t<e.length;t+=2){let r=e[t],a=e[t+1];if("string"!=typeof r||!eG.has(r)||!Array.isArray(a)||2!==a.length||"number"!=typeof a[0]||"number"!=typeof a[1])return}return new eZ(e)}}toString(){return JSON.stringify(this.values)}}class eW{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new eW({name:e,available:!1}):null}}function eK(e,t,r,a){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?typeof a>"u"||"number"==typeof a&&a>=0&&a<=1?null:`Invalid rgba value [${[e,t,r,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof a?[e,t,r,a]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function eJ(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof eF||e instanceof eD||e instanceof eH||e instanceof eV||e instanceof eZ||e instanceof eW)return!0;if(Array.isArray(e)){for(let t of e)if(!eJ(t))return!1;return!0}if("object"!=typeof e)return!1;for(let t in e)if(!eJ(e[t]))return!1;return!0}function eY(e){if(null===e)return en;if("string"==typeof e)return ei;if("boolean"==typeof e)return el;if("number"==typeof e)return eo;if(e instanceof eF)return es;if(e instanceof eD)return ec;if(e instanceof eH)return ed;if(e instanceof eV)return eh;if(e instanceof eZ)return ef;if(e instanceof eW)return ey;if(!Array.isArray(e))return eu;{let t;let r=e.length;for(let r of e){let e=eY(r);if(t){if(t===e)continue;t=ep;break}t=e}return em(t||ep,r)}}function eX(e){let t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof eF||e instanceof eH||e instanceof eV||e instanceof eZ||e instanceof eW?e.toString():JSON.stringify(e)}class eQ{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!eJ(e[1]))return t.error("invalid value");let r=e[1],a=eY(r),n=t.expectedType;return"array"===a.kind&&0===a.N&&n&&"array"===n.kind&&("number"!=typeof n.N||0===n.N)&&(a=n),new eQ(a,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class e0{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}let e1={string:ei,number:eo,boolean:el,object:eu};class e2{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=1,a,n=e[0];if("array"===n){let n,o;if(e.length>2){let a=e[1];if("string"!=typeof a||!(a in e1)||"object"===a)return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=e1[a],r++}else n=ep;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}a=em(n,o)}else{if(!e1[n])throw Error(`Types doesn't contain name = ${n}`);a=e1[n]}let o=[];for(;r<e.length;r++){let a=t.parse(e[r],r,ep);if(!a)return null;o.push(a)}return new e2(a,o)}evaluate(e){for(let t=0;t<this.args.length;t++){let r=this.args[t].evaluate(e);if(!eb(this.type,eY(r)))return r;if(t===this.args.length-1)throw new e0(`Expected value to be of type ${eg(this.type)}, but found ${eg(eY(r))} instead.`)}throw Error()}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}let e5={"to-boolean":el,"to-color":es,"to-number":eo,"to-string":ei};class e3{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=e[0];if(!e5[r])throw Error(`Can't parse ${r} as it is not part of the known types`);if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");let a=e5[r],n=[];for(let r=1;r<e.length;r++){let a=t.parse(e[r],r,ep);if(!a)return null;n.push(a)}return new e3(a,n)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,r;for(let a of this.args){if(t=a.evaluate(e),r=null,t instanceof eF)return t;if("string"==typeof t){let r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:eK(t[0],t[1],t[2],t[3])))return new eF(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new e0(r||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"padding":{let t;for(let r of this.args){t=r.evaluate(e);let a=eV.parse(t);if(a)return a}throw new e0(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(let r of this.args){t=r.evaluate(e);let a=eZ.parse(t);if(a)return a}throw new e0(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(let r of this.args){if(null===(t=r.evaluate(e)))return 0;let a=Number(t);if(!isNaN(a))return a}throw new e0(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return eH.fromString(eX(this.args[0].evaluate(e)));case"resolvedImage":return eW.fromString(eX(this.args[0].evaluate(e)));default:return eX(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}let e4=["Unknown","Point","LineString","Polygon"];class e8{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?e4[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=eF.parse(e)),t}}class e6{constructor(e,t,r=[],a,n=new ea,o=[]){this.registry=e,this.path=r,this.key=r.map(e=>`[${e}]`).join(""),this.scope=n,this.errors=o,this.expectedType=a,this._isConstant=t}parse(e,t,r,a,n={}){return t?this.concat(t,r,a)._parse(e,n):this._parse(e,n)}_parse(e,t){function r(e,t,r){return"assert"===r?new e2(t,[e]):"coerce"===r?new e3(t,[e]):e}if((null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e)&&(e=["literal",e]),!Array.isArray(e))return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`);{if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let a=e[0];if("string"!=typeof a)return this.error(`Expression name must be a string, but found ${typeof a} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let n=this.registry[a];if(n){let a=n.parse(e,this);if(!a)return null;if(this.expectedType){let e=this.expectedType,n=a.type;if(("string"===e.kind||"number"===e.kind||"boolean"===e.kind||"object"===e.kind||"array"===e.kind)&&"value"===n.kind)a=r(a,e,t.typeAnnotation||"assert");else if(("color"===e.kind||"formatted"===e.kind||"resolvedImage"===e.kind)&&("value"===n.kind||"string"===n.kind))a=r(a,e,t.typeAnnotation||"coerce");else if("padding"===e.kind&&("value"===n.kind||"number"===n.kind||"array"===n.kind))a=r(a,e,t.typeAnnotation||"coerce");else if("variableAnchorOffsetCollection"===e.kind&&("value"===n.kind||"array"===n.kind))a=r(a,e,t.typeAnnotation||"coerce");else if(this.checkSubtype(e,n))return null}if(!(a instanceof eQ)&&"resolvedImage"!==a.type.kind&&this._isConstant(a)){let e=new e8;try{a=new eQ(a.type,a.evaluate(e))}catch(e){return this.error(e.message),null}}return a}return this.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0)}}concat(e,t,r){let a="number"==typeof e?this.path.concat(e):this.path,n=r?this.scope.concat(r):this.scope;return new e6(this.registry,this._isConstant,a,t||null,n,this.errors)}error(e,...t){let r=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new er(r,e))}checkSubtype(e,t){let r=eb(e,t);return r&&this.error(r),r}}class e7{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(let t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);let r=[];for(let a=1;a<e.length-1;a+=2){let n=e[a];if("string"!=typeof n)return t.error(`Expected string, but found ${typeof n} instead.`,a);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",a);let o=t.parse(e[a+1],a+1);if(!o)return null;r.push([n,o])}let a=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return a?new e7(r,a):null}outputDefined(){return this.result.outputDefined()}}class e9{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");let r=e[1];return t.scope.has(r)?new e9(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class te{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let r=t.parse(e[1],1,eo),a=t.parse(e[2],2,em(t.expectedType||ep));return r&&a?new te(a.type.itemType,r,a):null}evaluate(e){let t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new e0(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new e0(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new e0(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class tt{constructor(e,t){this.type=el,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let r=t.parse(e[1],1,ep),a=t.parse(e[2],2,ep);return r&&a?ex(r.type,[el,ei,eo,en,ep])?new tt(r,a):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${eg(r.type)} instead`):null}evaluate(e){let t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!ew(t,["boolean","string","number","null"]))throw new e0(`Expected first argument to be of type boolean, string, number or null, but found ${eg(eY(t))} instead.`);if(!ew(r,["string","array"]))throw new e0(`Expected second argument to be of type array or string, but found ${eg(eY(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class tr{constructor(e,t,r){this.type=eo,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let r=t.parse(e[1],1,ep),a=t.parse(e[2],2,ep);if(!r||!a)return null;if(!ex(r.type,[el,ei,eo,en,ep]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${eg(r.type)} instead`);if(4!==e.length)return new tr(r,a);{let n=t.parse(e[3],3,eo);return n?new tr(r,a,n):null}}evaluate(e){let t;let r=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!ew(r,["boolean","string","number","null"]))throw new e0(`Expected first argument to be of type boolean, string, number or null, but found ${eg(eY(r))} instead.`);if(this.fromIndex&&(t=this.fromIndex.evaluate(e)),ew(a,["string"])){let e=a.indexOf(r,t);return -1===e?-1:[...a.slice(0,e)].length}if(ew(a,["array"]))return a.indexOf(r,t);throw new e0(`Expected second argument to be of type array or string, but found ${eg(eY(a))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class ta{constructor(e,t,r,a,n,o){this.inputType=e,this.type=t,this.input=r,this.cases=a,this.outputs=n,this.otherwise=o}static parse(e,t){let r,a;if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);let n={},o=[];for(let i=2;i<e.length-1;i+=2){let l=e[i],s=e[i+1];Array.isArray(l)||(l=[l]);let u=t.concat(i);if(0===l.length)return u.error("Expected at least one branch label.");for(let e of l){if("number"!=typeof e&&"string"!=typeof e)return u.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,eY(e)))return null}else r=eY(e);if("u">typeof n[String(e)])return u.error("Branch labels must be unique.");n[String(e)]=o.length}let p=t.parse(s,i,a);if(!p)return null;a=a||p.type,o.push(p)}let i=t.parse(e[1],1,ep);if(!i)return null;let l=t.parse(e[e.length-1],e.length-1,a);return!l||"value"!==i.type.kind&&t.concat(1).checkSubtype(r,i.type)?null:new ta(r,a,i,n,o,l)}evaluate(e){let t=this.input.evaluate(e);return(eY(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class tn{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){let r;if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);let a=[];for(let n=1;n<e.length-1;n+=2){let o=t.parse(e[n],n,el);if(!o)return null;let i=t.parse(e[n+1],n+1,r);if(!i)return null;a.push([o,i]),r=r||i.type}let n=t.parse(e[e.length-1],e.length-1,r);if(!n)return null;if(!r)throw Error("Can't infer output type");return new tn(r,a,n)}evaluate(e){for(let[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(let[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class to{constructor(e,t,r,a){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=a}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let r=t.parse(e[1],1,ep),a=t.parse(e[2],2,eo);if(!r||!a)return null;if(!ex(r.type,[em(ep),ei,ep]))return t.error(`Expected first argument to be of type array or string, but found ${eg(r.type)} instead`);if(4!==e.length)return new to(r.type,r,a);{let n=t.parse(e[3],3,eo);return n?new to(r.type,r,a,n):null}}evaluate(e){let t;let r=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(this.endIndex&&(t=this.endIndex.evaluate(e)),ew(r,["string"]))return[...r].slice(a,t).join("");if(ew(r,["array"]))return r.slice(a,t);throw new e0(`Expected first argument to be of type array or string, but found ${eg(eY(r))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function ti(e,t){let r=e.length-1,a=0,n=r,o=0,i,l;for(;a<=n;)if(i=e[o=Math.floor((a+n)/2)],l=e[o+1],i<=t){if(o===r||t<l)return o;a=o+1}else if(i>t)n=o-1;else throw new e0("Input is not a number.");return 0}class tl{constructor(e,t,r){for(let[a,n]of(this.type=e,this.input=t,this.labels=[],this.outputs=[],r))this.labels.push(a),this.outputs.push(n)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");let r=t.parse(e[1],1,eo);if(!r)return null;let a=[],n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(let r=1;r<e.length;r+=2){let o=1===r?-1/0:e[r],i=e[r+1],l=r,s=r+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(a.length&&a[a.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);let u=t.parse(i,s,n);if(!u)return null;n=n||u.type,a.push([o,u])}return new tl(n,r,a)}evaluate(e){let t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);let a=this.input.evaluate(e);if(a<=t[0])return r[0].evaluate(e);let n=t.length;return a>=t[n-1]?r[n-1].evaluate(e):r[ti(t,a)].evaluate(e)}eachChild(e){for(let t of(e(this.input),this.outputs))e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ts(e,t,r,a){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(a-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=a}ts.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,a=0;a<8;a++){var n=this.sampleCurveX(r)-e;if(Math.abs(n)<t)return r;var o=this.sampleCurveDerivativeX(r);if(1e-6>Math.abs(o))break;r-=n/o}var i=0,l=1;for(r=e,a=0;a<20&&!(Math.abs((n=this.sampleCurveX(r))-e)<t);a++)e>n?i=r:l=r,r=(l-i)*.5+i;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var tu=ts&&ts.__esModule&&Object.prototype.hasOwnProperty.call(ts,"default")?ts.default:ts;function tp(e,t,r){return e.map((e,a)=>e+r*(t[a]-e))}let tc={number:function(e,t,r){return e+r*(t-e)},color:function(e,t,r,a="rgb"){switch(a){case"rgb":{let[a,n,o,i]=tp(e.rgb,t.rgb,r);return new eF(a,n,o,i,!1)}case"hcl":{let a,n;let[o,i,l,s]=e.hcl,[u,p,c,d]=t.hcl;if(isNaN(o)||isNaN(u))isNaN(o)?isNaN(u)?a=NaN:(a=u,(1===l||0===l)&&(n=p)):(a=o,(1===c||0===c)&&(n=i));else{let e=u-o;u>o&&e>180?e-=360:u<o&&o-u>180&&(e+=360),a=o+r*e}let[h,y,f,m]=function([e,t,r,a]){return eq([r,Math.cos(e=isNaN(e)?0:e*ez)*t,Math.sin(e)*t,a])}([a,n??i+r*(p-i),l+r*(c-l),s+r*(d-s)]);return new eF(h,y,f,m,!1)}case"lab":{let[a,n,o,i]=eq(tp(e.lab,t.lab,r));return new eF(a,n,o,i,!1)}}},array:tp,padding:function(e,t,r){return new eV(tp(e.values,t.values,r))},variableAnchorOffsetCollection:function(e,t,r){let a=e.values,n=t.values;if(a.length!==n.length)throw new e0(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);let o=[];for(let e=0;e<a.length;e+=2){if(a[e]!==n[e])throw new e0(`Cannot interpolate values containing mismatched anchors. from[${e}]: ${a[e]}, to[${e}]: ${n[e]}`);o.push(a[e]);let[t,i]=a[e+1],[l,s]=n[e+1];o.push([t+r*(l-t),i+r*(s-i)])}return new eZ(o)}};class td{constructor(e,t,r,a,n){for(let[o,i]of(this.type=e,this.operator=t,this.interpolation=r,this.input=a,this.labels=[],this.outputs=[],n))this.labels.push(o),this.outputs.push(i)}static interpolationFactor(e,t,r,a){let n=0;if("exponential"===e.name)n=th(t,e.base,r,a);else if("linear"===e.name)n=th(t,1,r,a);else if("cubic-bezier"===e.name){let o=e.controlPoints;n=new tu(o[0],o[1],o[2],o[3]).solve(th(t,1,r,a))}return n}static parse(e,t){let[r,a,n,...o]=e;if(!Array.isArray(a)||0===a.length)return t.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){let e=a[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:e}}else{if("cubic-bezier"!==a[0])return t.error(`Unknown interpolation type ${String(a[0])}`,1,0);let e=a.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:e}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,2,eo)))return null;let i=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=es:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(let e=0;e<o.length;e+=2){let r=o[e],a=o[e+1],n=e+3,s=e+4;if("number"!=typeof r)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(i.length&&i[i.length-1][0]>=r)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);let u=t.parse(a,s,l);if(!u)return null;l=l||u.type,i.push([r,u])}return eS(l,eo)||eS(l,es)||eS(l,eh)||eS(l,ef)||eS(l,em(eo))?new td(l,r,a,n,i):t.error(`Type ${eg(l)} is not interpolatable.`)}evaluate(e){let t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);let a=this.input.evaluate(e);if(a<=t[0])return r[0].evaluate(e);let n=t.length;if(a>=t[n-1])return r[n-1].evaluate(e);let o=ti(t,a),i=t[o],l=t[o+1],s=td.interpolationFactor(this.interpolation,a,i,l),u=r[o].evaluate(e),p=r[o+1].evaluate(e);switch(this.operator){case"interpolate":return tc[this.type.kind](u,p,s);case"interpolate-hcl":return tc.color(u,p,s,"hcl");case"interpolate-lab":return tc.color(u,p,s,"lab")}}eachChild(e){for(let t of(e(this.input),this.outputs))e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function th(e,t,r,a){let n=a-r,o=e-r;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}class ty{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null,a=t.expectedType;a&&"value"!==a.kind&&(r=a);let n=[];for(let a of e.slice(1)){let e=t.parse(a,1+n.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,n.push(e)}if(!r)throw Error("No output type");return a&&n.some(e=>eb(a,e.type))?new ty(ep,n):new ty(r,n)}evaluate(e){let t=null,r=0,a;for(let n of this.args)if(r++,(t=n.evaluate(e))&&t instanceof eW&&!t.available&&(a||(a=t.name),t=null,r===this.args.length&&(t=a)),null!==t)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function tf(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function tm(e,t,r,a){return 0===a.compare(t,r)}function tg(e,t,r){let a="=="!==e&&"!="!==e;return class n{constructor(e,t,r){this.type=el,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");let r=e[0],o=t.parse(e[1],1,ep);if(!o)return null;if(!tf(r,o.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${eg(o.type)}'.`);let i=t.parse(e[2],2,ep);if(!i)return null;if(!tf(r,i.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${eg(i.type)}'.`);if(o.type.kind!==i.type.kind&&"value"!==o.type.kind&&"value"!==i.type.kind)return t.error(`Cannot compare types '${eg(o.type)}' and '${eg(i.type)}'.`);a&&("value"===o.type.kind&&"value"!==i.type.kind?o=new e2(i.type,[o]):"value"!==o.type.kind&&"value"===i.type.kind&&(i=new e2(o.type,[i])));let l=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==i.type.kind&&"value"!==o.type.kind&&"value"!==i.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(l=t.parse(e[3],3,ec)))return null}return new n(o,i,l)}evaluate(n){let o=this.lhs.evaluate(n),i=this.rhs.evaluate(n);if(a&&this.hasUntypedArgument){let t=eY(o),r=eY(i);if(t.kind!==r.kind||!("string"===t.kind||"number"===t.kind))throw new e0(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){let e=eY(o),r=eY(i);if("string"!==e.kind||"string"!==r.kind)return t(n,o,i)}return this.collator?r(n,o,i,this.collator.evaluate(n)):t(n,o,i)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}let tv=tg("==",function(e,t,r){return t===r},tm),tb=tg("!=",function(e,t,r){return t!==r},function(e,t,r,a){return!tm(e,t,r,a)}),tx=tg("<",function(e,t,r){return t<r},function(e,t,r,a){return 0>a.compare(t,r)}),tw=tg(">",function(e,t,r){return t>r},function(e,t,r,a){return a.compare(t,r)>0}),tS=tg("<=",function(e,t,r){return t<=r},function(e,t,r,a){return 0>=a.compare(t,r)}),tk=tg(">=",function(e,t,r){return t>=r},function(e,t,r,a){return a.compare(t,r)>=0});class t_{constructor(e,t,r){this.type=ec,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");let r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");let a=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,el);if(!a)return null;let n=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,el);if(!n)return null;let o=null;return!r.locale||(o=t.parse(r.locale,1,ei))?new t_(a,n,o):null}evaluate(e){return new eD(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class tC{constructor(e,t,r,a,n){this.type=ei,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=a,this.maxFractionDigits=n}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");let r=t.parse(e[1],1,eo);if(!r)return null;let a=e[2];if("object"!=typeof a||Array.isArray(a))return t.error("NumberFormat options argument must be an object.");let n=null;if(a.locale&&!(n=t.parse(a.locale,1,ei)))return null;let o=null;if(a.currency&&!(o=t.parse(a.currency,1,ei)))return null;let i=null;if(a["min-fraction-digits"]&&!(i=t.parse(a["min-fraction-digits"],1,eo)))return null;let l=null;return!a["max-fraction-digits"]||(l=t.parse(a["max-fraction-digits"],1,eo))?new tC(r,n,o,i,l):null}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class tL{constructor(e){this.type=ed,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");let a=[],n=!1;for(let r=1;r<=e.length-1;++r){let o=e[r];if(n&&"object"==typeof o&&!Array.isArray(o)){n=!1;let e=null;if(o["font-scale"]&&!(e=t.parse(o["font-scale"],1,eo)))return null;let r=null;if(o["text-font"]&&!(r=t.parse(o["text-font"],1,em(ei))))return null;let i=null;if(o["text-color"]&&!(i=t.parse(o["text-color"],1,es)))return null;let l=a[a.length-1];l.scale=e,l.font=r,l.textColor=i}else{let o=t.parse(e[r],1,ep);if(!o)return null;let i=o.type.kind;if("string"!==i&&"value"!==i&&"null"!==i&&"resolvedImage"!==i)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,a.push({content:o,scale:null,font:null,textColor:null})}}return new tL(a)}evaluate(e){return new eH(this.sections.map(t=>{let r=t.content.evaluate(e);return eY(r)===ey?new eB("",r,null,null,null):new eB(eX(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(let t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class tz{constructor(e){this.type=ey,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");let r=t.parse(e[1],1,ei);return r?new tz(r):t.error("No image name provided.")}evaluate(e){let t=this.input.evaluate(e),r=eW.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class t${constructor(e){this.type=eo,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);let r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${eg(r.type)} instead.`):new t$(r):null}evaluate(e){let t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new e0(`Expected value to be of type string or array, but found ${eg(eY(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}function tA(e,t){let r=Math.pow(2,t.z);return[(e[0]/8192+t.x)/r*360-180,360/Math.PI*Math.atan(Math.exp((180-(e[1]/8192+t.y)/r*360)*Math.PI/180))-90]}function tE(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function tM(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function tT(e,t,r,a){var n;let o=[t[0]-e[0],t[1]-e[1]];return 0!=(n=[a[0]-r[0],a[1]-r[1]])[0]*o[1]-n[1]*o[0]&&!!(tP(e,t,r,a)&&tP(r,a,e,t))}function tq(e,t,r=!1){let a=!1;for(let i of t)for(let t=0;t<i.length-1;t++){var n,o;if(function(e,t,r){let a=e[0]-t[0],n=e[1]-t[1],o=e[0]-r[0],i=e[1]-r[1];return a*i-o*n==0&&a*o<=0&&n*i<=0}(e,i[t],i[t+1]))return r;n=i[t],o=i[t+1],n[1]>e[1]!=o[1]>e[1]&&e[0]<(o[0]-n[0])*(e[1]-n[1])/(o[1]-n[1])+n[0]&&(a=!a)}return a}function tI(e,t){for(let r of e)if(!tq(r,t))return!1;for(let r=0;r<e.length-1;++r)if(function(e,t,r){for(let a of r)for(let r=0;r<a.length-1;++r)if(tT(e,t,a[r],a[r+1]))return!0;return!1}(e[r],e[r+1],t))return!1;return!0}function tP(e,t,r,a){let n=e[0]-r[0],o=e[1]-r[1],i=t[0]-r[0],l=t[1]-r[1],s=a[0]-r[0],u=a[1]-r[1],p=n*u-s*o,c=i*u-s*l;return p>0&&c<0||p<0&&c>0}function tj(e,t,r){let a=[];for(let n=0;n<e.length;n++){let o=[];for(let a=0;a<e[n].length;a++){let i=function(e,t){let r=(180+e[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,n=Math.pow(2,t.z);return[Math.round(r*n*8192),Math.round(a*n*8192)]}(e[n][a],r);tE(t,i),o.push(i)}a.push(o)}return a}function tN(e,t,r){let a=[];for(let n=0;n<e.length;n++){let o=tj(e[n],t,r);a.push(o)}return a}function tO(e,t,r,a){if(e[0]<r[0]||e[0]>r[2]){let t=.5*a,n=e[0]-r[0]>t?-a:r[0]-e[0]>t?a:0;0===n&&(n=e[0]-r[2]>t?-a:r[2]-e[0]>t?a:0),e[0]+=n}tE(t,e)}function tU(e,t,r,a){let n=8192*Math.pow(2,a.z),o=[8192*a.x,8192*a.y],i=[];for(let a of e)for(let e of a){let a=[e.x+o[0],e.y+o[1]];tO(a,t,r,n),i.push(a)}return i}function tR(e,t,r,a){let n=8192*Math.pow(2,a.z),o=[8192*a.x,8192*a.y],i=[];for(let r of e){let e=[];for(let a of r){let r=[a.x+o[0],a.y+o[1]];tE(t,r),e.push(r)}i.push(e)}if(t[2]-t[0]<=n/2)for(let e of(t[0]=t[1]=1/0,t[2]=t[3]=-1/0,i))for(let a of e)tO(a,t,r,n);return i}class tF{constructor(e,t){this.type=el,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(eJ(e[1])){let t=e[1];if("FeatureCollection"===t.type){let e=[];for(let r of t.features){let{type:t,coordinates:a}=r.geometry;"Polygon"===t&&e.push(a),"MultiPolygon"===t&&e.push(...a)}if(e.length)return new tF(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){let e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new tF(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new tF(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){let r=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){let o=tj(t.coordinates,a,n),i=tU(e.geometry(),r,a,n);if(!tM(r,a))return!1;for(let e of i)if(!tq(e,o))return!1}if("MultiPolygon"===t.type){let o=tN(t.coordinates,a,n),i=tU(e.geometry(),r,a,n);if(!tM(r,a))return!1;for(let e of i)if(!function(e,t){for(let r of t)if(tq(e,r))return!0;return!1}(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){let r=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){let o=tj(t.coordinates,a,n),i=tR(e.geometry(),r,a,n);if(!tM(r,a))return!1;for(let e of i)if(!tI(e,o))return!1}if("MultiPolygon"===t.type){let o=tN(t.coordinates,a,n),i=tR(e.geometry(),r,a,n);if(!tM(r,a))return!1;for(let e of i)if(!function(e,t){for(let r of t)if(tI(e,r))return!0;return!1}(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class tD{constructor(e=[],t=(e,t)=>e<t?-1:e>t?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;let e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:r}=this,a=t[e];for(;e>0;){let n=e-1>>1,o=t[n];if(r(a,o)>=0)break;t[e]=o,e=n}t[e]=a}_down(e){let{data:t,compare:r}=this,a=this.length>>1,n=t[e];for(;e<a;){let a=(e<<1)+1,o=a+1;if(o<this.length&&0>r(t[o],t[a])&&(a=o),r(t[a],n)>=0)break;t[e]=t[a],e=a}t[e]=n}}let tB=1/298.257223563*(2-1/298.257223563),tH=Math.PI/180;class tV{constructor(e){let t=6378137*tH,r=Math.cos(e*tH),a=1/(1-tB*(1-r*r)),n=Math.sqrt(a);this.kx=t*n*r,this.ky=t*n*a*(1-tB)}distance(e,t){let r=this.wrap(e[0]-t[0])*this.kx,a=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+a*a)}pointOnLine(e,t){let r=1/0,a,n,o,i;for(let l=0;l<e.length-1;l++){let s=e[l][0],u=e[l][1],p=this.wrap(e[l+1][0]-s)*this.kx,c=(e[l+1][1]-u)*this.ky,d=0;(0!==p||0!==c)&&((d=(this.wrap(t[0]-s)*this.kx*p+(t[1]-u)*this.ky*c)/(p*p+c*c))>1?(s=e[l+1][0],u=e[l+1][1]):d>0&&(s+=p/this.kx*d,u+=c/this.ky*d));let h=(p=this.wrap(t[0]-s)*this.kx)*p+(c=(t[1]-u)*this.ky)*c;h<r&&(r=h,a=s,n=u,o=l,i=d)}return{point:[a,n],index:o,t:Math.max(0,Math.min(1,i))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function tG(e,t){return t[0]-e[0]}function tZ(e){return e[1]-e[0]+1}function tW(e,t){return e[1]>=e[0]&&e[1]<t}function tK(e,t){if(e[0]>e[1])return[null,null];let r=tZ(e);if(t){if(2===r)return[e,null];let t=Math.floor(r/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===r)return[e,null];let a=Math.floor(r/2)-1;return[[e[0],e[0]+a],[e[0]+a+1,e[1]]]}function tJ(e,t){if(!tW(t,e.length))return[1/0,1/0,-1/0,-1/0];let r=[1/0,1/0,-1/0,-1/0];for(let a=t[0];a<=t[1];++a)tE(r,e[a]);return r}function tY(e){let t=[1/0,1/0,-1/0,-1/0];for(let r of e)for(let e of r)tE(t,e);return t}function tX(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function tQ(e,t,r){if(!tX(e)||!tX(t))return NaN;let a=0,n=0;return e[2]<t[0]&&(a=t[0]-e[2]),e[0]>t[2]&&(a=e[0]-t[2]),e[1]>t[3]&&(n=e[1]-t[3]),e[3]<t[1]&&(n=t[1]-e[3]),r.distance([0,0],[a,n])}function t0(e,t,r){let a=r.pointOnLine(t,e);return r.distance(e,a.point)}function t1(e,t,r,a,n){return Math.min(Math.min(t0(e,[r,a],n),t0(t,[r,a],n)),Math.min(t0(r,[e,t],n),t0(a,[e,t],n)))}function t2(e,t){for(let r of e)for(let e of r)if(tq(e,t,!0))return!0;return!1}function t5(e,t,r,a,n,o){if(!o)return;let i=tQ(tJ(a,o),n,r);i<t&&e.push([i,o,[0,0]])}function t3(e,t,r,a,n,o,i){if(!o||!i)return;let l=tQ(tJ(a,o),tJ(n,i),r);l<t&&e.push([l,o,i])}function t4(e,t,r,a,n=1/0){let o=Math.min(a.distance(e[0],r[0][0]),n);if(0===o)return o;let i=new tD([[0,[0,e.length-1],[0,0]]],tG),l=tY(r);for(;i.length>0;){let n=i.pop();if(n[0]>=o)continue;let s=n[1],u=t?50:100;if(tZ(s)<=u){if(!tW(s,e.length))return NaN;if(t){let t=function(e,t,r,a){if(!tW(t,e.length))return NaN;for(let a=t[0];a<=t[1];++a)if(tq(e[a],r,!0))return 0;let n=1/0;for(let o=t[0];o<t[1];++o){let t=e[o],i=e[o+1];for(let e of r)for(let r=0,o=e.length,l=o-1;r<o;l=r++){let o=e[l],s=e[r];if(tT(t,i,o,s))return 0;n=Math.min(n,t1(t,i,o,s,a))}}return n}(e,s,r,a);if(isNaN(t)||0===t)return t;o=Math.min(o,t)}else for(let t=s[0];t<=s[1];++t)if(0===(o=Math.min(o,function(e,t,r){if(tq(e,t,!0))return 0;let a=1/0;for(let n of t){let t=n[0],o=n[n.length-1];if(t!==o&&0===(a=Math.min(a,t0(e,[o,t],r))))break;let i=r.pointOnLine(n,e);if(0===(a=Math.min(a,r.distance(e,i.point))))break}return a}(e[t],r,a))))return 0}else{let r=tK(s,t);t5(i,o,a,e,l,r[0]),t5(i,o,a,e,l,r[1])}}return o}function t8(e,t,r,a,n,o=1/0){let i=Math.min(o,n.distance(e[0],r[0]));if(0===i)return i;let l=new tD([[0,[0,e.length-1],[0,r.length-1]]],tG);for(;l.length>0;){let o=l.pop();if(o[0]>=i)continue;let s=o[1],u=o[2],p=t?50:100,c=a?50:100;if(tZ(s)<=p&&tZ(u)<=c){if(!tW(s,e.length)&&tW(u,r.length))return NaN;if(t&&a)i=Math.min(i,function(e,t,r,a,n){if(!(tW(t,e.length)&&tW(a,r.length)))return 1/0;let o=1/0;for(let i=t[0];i<t[1];++i){let t=e[i],l=e[i+1];for(let e=a[0];e<a[1];++e){let a=r[e],i=r[e+1];if(tT(t,l,a,i))return 0;o=Math.min(o,t1(t,l,a,i,n))}}return o}(e,s,r,u,n));else if(t&&!a){let t=e.slice(s[0],s[1]+1);for(let e=u[0];e<=u[1];++e)if(0===(i=Math.min(i,t0(r[e],t,n))))return i}else if(!t&&a){let t=r.slice(u[0],u[1]+1);for(let r=s[0];r<=s[1];++r)if(0===(i=Math.min(i,t0(e[r],t,n))))return i}else i=Math.min(i,function(e,t,r,a,n){if(!(tW(t,e.length)&&tW(a,r.length)))return NaN;let o=1/0;for(let i=t[0];i<=t[1];++i)for(let t=a[0];t<=a[1];++t)if(0===(o=Math.min(o,n.distance(e[i],r[t]))))return o;return o}(e,s,r,u,n))}else{let o=tK(s,t),p=tK(u,a);t3(l,i,n,e,r,o[0],p[0]),t3(l,i,n,e,r,o[0],p[1]),t3(l,i,n,e,r,o[1],p[0]),t3(l,i,n,e,r,o[1],p[1])}}return i}function t6(e){return"MultiPolygon"===e.type?e.coordinates.map(e=>({type:"Polygon",coordinates:e})):"MultiLineString"===e.type?e.coordinates.map(e=>({type:"LineString",coordinates:e})):"MultiPoint"===e.type?e.coordinates.map(e=>({type:"Point",coordinates:e})):[e]}class t7{constructor(e,t){this.type=eo,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(eJ(e[1])){let t=e[1];if("FeatureCollection"===t.type)return new t7(t,t.features.map(e=>t6(e.geometry)).flat());if("Feature"===t.type)return new t7(t,t6(t.geometry));if("type"in t&&"coordinates"in t)return new t7(t,t6(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){let r=e.geometry(),a=r.flat().map(t=>tA([t.x,t.y],e.canonical));if(0===r.length)return NaN;let n=new tV(a[0][1]),o=1/0;for(let e of t){switch(e.type){case"Point":o=Math.min(o,t8(a,!1,[e.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,t8(a,!1,e.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,t4(a,!1,e.coordinates,n,o))}if(0===o)break}return o}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){let r=e.geometry(),a=r.flat().map(t=>tA([t.x,t.y],e.canonical));if(0===r.length)return NaN;let n=new tV(a[0][1]),o=1/0;for(let e of t){switch(e.type){case"Point":o=Math.min(o,t8(a,!0,[e.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,t8(a,!0,e.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,t4(a,!0,e.coordinates,n,o))}if(0===o)break}return o}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){let r=e.geometry();if(0===r.length||0===r[0].length)return NaN;let a=(function(e,t){let r,a;if(e.length<=1)return[e];let n=[];for(let t of e){let e=function(e){let t=0;for(let r=0,a=e.length,n=a-1,o,i;r<a;n=r++)o=e[r],t+=((i=e[n]).x-o.x)*(o.y+i.y);return t}(t);0!==e&&(t.area=Math.abs(e),void 0===a&&(a=e<0),a===e<0?(r&&n.push(r),r=[t]):r.push(t))}return r&&n.push(r),n})(r).map(t=>t.map(t=>t.map(t=>tA([t.x,t.y],e.canonical)))),n=new tV(a[0][0][0][1]),o=1/0;for(let e of t)for(let t of a){switch(e.type){case"Point":o=Math.min(o,t4([e.coordinates],!1,t,n,o));break;case"LineString":o=Math.min(o,t4(e.coordinates,!0,t,n,o));break;case"Polygon":o=Math.min(o,function(e,t,r,a=1/0){let n=tY(e),o=tY(t);if(a!==1/0&&tQ(n,o,r)>=a)return a;if(tM(n,o)){if(t2(e,t))return 0}else if(t2(t,e))return 0;let i=1/0;for(let a of e)for(let e=0,n=a.length,o=n-1;e<n;o=e++){let n=a[o],l=a[e];for(let e of t)for(let t=0,a=e.length,o=a-1;t<a;o=t++){let a=e[o],s=e[t];if(tT(n,l,a,s))return 0;i=Math.min(i,t1(n,l,a,s,r))}}return i}(t,e.coordinates,n,o))}if(0===o)return o}return o}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let t9={"==":tv,"!=":tb,">":tw,"<":tx,">=":tk,"<=":tS,array:e2,at:te,boolean:e2,case:tn,coalesce:ty,collator:t_,format:tL,image:tz,in:tt,"index-of":tr,interpolate:td,"interpolate-hcl":td,"interpolate-lab":td,length:t$,let:e7,literal:eQ,match:ta,number:e2,"number-format":tC,object:e2,slice:to,step:tl,string:e2,"to-boolean":e3,"to-color":e3,"to-number":e3,"to-string":e3,var:e9,within:tF,distance:t7};class re{constructor(e,t,r,a){this.name=e,this.type=t,this._evaluate=r,this.args=a}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){let r=e[0],a=re.definitions[r];if(!a)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);let n=Array.isArray(a)?a[0]:a.type,o=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,i=o.filter(([t])=>!Array.isArray(t)||t.length===e.length-1),l=null;for(let[a,o]of i){l=new e6(t.registry,rn,t.path,null,t.scope);let i=[],s=!1;for(let t=1;t<e.length;t++){let r=e[t],n=Array.isArray(a)?a[t-1]:a.type,o=l.parse(r,1+i.length,n);if(!o){s=!0;break}i.push(o)}if(!s){if(Array.isArray(a)&&a.length!==i.length){l.error(`Expected ${a.length} arguments, but found ${i.length} instead.`);continue}for(let e=0;e<i.length;e++){let t=Array.isArray(a)?a[e]:a.type,r=i[e];l.concat(e+1).checkSubtype(t,r.type)}if(0===l.errors.length)return new re(r,n,o,i)}}if(1===i.length)t.errors.push(...l.errors);else{let r=(i.length?i:o).map(([e])=>Array.isArray(e)?`(${e.map(eg).join(", ")})`:`(${eg(e.type)}...)`).join(" | "),a=[];for(let r=1;r<e.length;r++){let n=t.parse(e[r],1+a.length);if(!n)return null;a.push(eg(n.type))}t.error(`Expected arguments of type ${r}, but found (${a.join(", ")}) instead.`)}return null}static register(e,t){for(let r in re.definitions=t,t)e[r]=re}}function rt(e,[t,r,a,n]){t=t.evaluate(e),r=r.evaluate(e),a=a.evaluate(e);let o=n?n.evaluate(e):1,i=eK(t,r,a,o);if(i)throw new e0(i);return new eF(t/255,r/255,a/255,o,!1)}function rr(e,t){let r=t[e];return typeof r>"u"?null:r}function ra(e){return{type:e}}function rn(e){if(e instanceof e9)return rn(e.boundExpression);if(e instanceof re&&"error"===e.name||e instanceof t_||e instanceof tF||e instanceof t7)return!1;let t=e instanceof e3||e instanceof e2,r=!0;return e.eachChild(e=>{r=t?r&&rn(e):r&&e instanceof eQ}),!!r&&ro(e)&&rl(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ro(e){if(e instanceof re&&("get"===e.name&&1===e.args.length||"feature-state"===e.name||"has"===e.name&&1===e.args.length||"properties"===e.name||"geometry-type"===e.name||"id"===e.name||/^filter-/.test(e.name))||e instanceof tF||e instanceof t7)return!1;let t=!0;return e.eachChild(e=>{t&&!ro(e)&&(t=!1)}),t}function ri(e){if(e instanceof re&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!ri(e)&&(t=!1)}),t}function rl(e,t){if(e instanceof re&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild(e=>{r&&!rl(e,t)&&(r=!1)}),r}function rs(e){return{result:"success",value:e}}function ru(e){return{result:"error",value:e}}function rp(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function rc(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function rd(e){return!!e.expression&&e.expression.interpolated}function rh(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ry(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}re.register(t9,{error:[{kind:"error"},[ei],(e,[t])=>{throw new e0(t.evaluate(e))}],typeof:[ei,[ep],(e,[t])=>eg(eY(t.evaluate(e)))],"to-rgba":[em(eo,4),[es],(e,[t])=>{let[r,a,n,o]=t.evaluate(e).rgb;return[255*r,255*a,255*n,o]}],rgb:[es,[eo,eo,eo],rt],rgba:[es,[eo,eo,eo,eo],rt],has:{type:el,overloads:[[[ei],(e,[t])=>t.evaluate(e) in e.properties()],[[ei,eu],(e,[t,r])=>t.evaluate(e) in r.evaluate(e)]]},get:{type:ep,overloads:[[[ei],(e,[t])=>rr(t.evaluate(e),e.properties())],[[ei,eu],(e,[t,r])=>rr(t.evaluate(e),r.evaluate(e))]]},"feature-state":[ep,[ei],(e,[t])=>rr(t.evaluate(e),e.featureState||{})],properties:[eu,[],e=>e.properties()],"geometry-type":[ei,[],e=>e.geometryType()],id:[ep,[],e=>e.id()],zoom:[eo,[],e=>e.globals.zoom],"heatmap-density":[eo,[],e=>e.globals.heatmapDensity||0],"line-progress":[eo,[],e=>e.globals.lineProgress||0],accumulated:[ep,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[eo,ra(eo),(e,t)=>{let r=0;for(let a of t)r+=a.evaluate(e);return r}],"*":[eo,ra(eo),(e,t)=>{let r=1;for(let a of t)r*=a.evaluate(e);return r}],"-":{type:eo,overloads:[[[eo,eo],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[eo],(e,[t])=>-t.evaluate(e)]]},"/":[eo,[eo,eo],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[eo,[eo,eo],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[eo,[],()=>Math.LN2],pi:[eo,[],()=>Math.PI],e:[eo,[],()=>Math.E],"^":[eo,[eo,eo],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[eo,[eo],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[eo,[eo],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[eo,[eo],(e,[t])=>Math.log(t.evaluate(e))],log2:[eo,[eo],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[eo,[eo],(e,[t])=>Math.sin(t.evaluate(e))],cos:[eo,[eo],(e,[t])=>Math.cos(t.evaluate(e))],tan:[eo,[eo],(e,[t])=>Math.tan(t.evaluate(e))],asin:[eo,[eo],(e,[t])=>Math.asin(t.evaluate(e))],acos:[eo,[eo],(e,[t])=>Math.acos(t.evaluate(e))],atan:[eo,[eo],(e,[t])=>Math.atan(t.evaluate(e))],min:[eo,ra(eo),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[eo,ra(eo),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[eo,[eo],(e,[t])=>Math.abs(t.evaluate(e))],round:[eo,[eo],(e,[t])=>{let r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[eo,[eo],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[eo,[eo],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[el,[ei,ep],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[el,[ep],(e,[t])=>e.id()===t.value],"filter-type-==":[el,[ei],(e,[t])=>e.geometryType()===t.value],"filter-<":[el,[ei,ep],(e,[t,r])=>{let a=e.properties()[t.value],n=r.value;return typeof a==typeof n&&a<n}],"filter-id-<":[el,[ep],(e,[t])=>{let r=e.id(),a=t.value;return typeof r==typeof a&&r<a}],"filter->":[el,[ei,ep],(e,[t,r])=>{let a=e.properties()[t.value],n=r.value;return typeof a==typeof n&&a>n}],"filter-id->":[el,[ep],(e,[t])=>{let r=e.id(),a=t.value;return typeof r==typeof a&&r>a}],"filter-<=":[el,[ei,ep],(e,[t,r])=>{let a=e.properties()[t.value],n=r.value;return typeof a==typeof n&&a<=n}],"filter-id-<=":[el,[ep],(e,[t])=>{let r=e.id(),a=t.value;return typeof r==typeof a&&r<=a}],"filter->=":[el,[ei,ep],(e,[t,r])=>{let a=e.properties()[t.value],n=r.value;return typeof a==typeof n&&a>=n}],"filter-id->=":[el,[ep],(e,[t])=>{let r=e.id(),a=t.value;return typeof r==typeof a&&r>=a}],"filter-has":[el,[ep],(e,[t])=>t.value in e.properties()],"filter-has-id":[el,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[el,[em(ei)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[el,[em(ep)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[el,[ei,em(ep)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[el,[ei,em(ep)],(e,[t,r])=>(function(e,t,r,a){for(;r<=a;){let n=r+a>>1;if(t[n]===e)return!0;t[n]>e?a=n-1:r=n+1}return!1})(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:el,overloads:[[[el,el],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[ra(el),(e,t)=>{for(let r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:el,overloads:[[[el,el],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[ra(el),(e,t)=>{for(let r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[el,[el],(e,[t])=>!t.evaluate(e)],"is-supported-script":[el,[ei],(e,[t])=>{let r=e.globals&&e.globals.isSupportedScript;return!r||r(t.evaluate(e))}],upcase:[ei,[ei],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ei,[ei],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ei,ra(ep),(e,t)=>t.map(t=>eX(t.evaluate(e))).join("")],"resolved-locale":[ei,[ec],(e,[t])=>t.evaluate(e).resolvedLocale()]});class rf{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new e8,this._defaultValue=t?"color"===t.type&&ry(t.default)?new eF(0,0,0,0):"color"===t.type?eF.parse(t.default)||null:"padding"===t.type?eV.parse(t.default)||null:"variableAnchorOffsetCollection"===t.type?eZ.parse(t.default)||null:void 0===t.default?null:t.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,a,n,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=a,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,a,n,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=a,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{let e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new e0(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"u">typeof console&&console.warn(e.message)),this._defaultValue}}}function rm(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in t9}function rg(e,t){let r=new e6(t9,rn,[],t?function(e){let t={color:es,string:ei,number:eo,enum:ei,boolean:el,formatted:ed,padding:eh,resolvedImage:ey,variableAnchorOffsetCollection:ef};return"array"===e.type?em(t[e.value]||ep,e.length):t[e.type]}(t):void 0),a=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return a?rs(new rf(a,t)):ru(r.errors)}class rv{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!ri(t.expression)}evaluateWithoutErrorHandling(e,t,r,a,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,a,n,o)}evaluate(e,t,r,a,n,o){return this._styleExpression.evaluate(e,t,r,a,n,o)}}class rb{constructor(e,t,r,a){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!ri(t.expression),this.interpolationType=a}evaluateWithoutErrorHandling(e,t,r,a,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,a,n,o)}evaluate(e,t,r,a,n,o){return this._styleExpression.evaluate(e,t,r,a,n,o)}interpolationFactor(e,t,r){return this.interpolationType?td.interpolationFactor(this.interpolationType,e,t,r):0}}function rx(e){let t=e.key,r=e.value;return r?[new ee(t,r,"constants have been deprecated as of v8")]:[]}function rw(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function rS(e){if(Array.isArray(e))return e.map(rS);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){let t={};for(let r in e)t[r]=rS(e[r]);return t}return rw(e)}function rk(e){let t=e.key,r=e.value,a=e.valueSpec||{},n=e.objectElementValidators||{},o=e.style,i=e.styleSpec,l=e.validateSpec,s=[],u=rh(r);if("object"!==u)return[new ee(t,r,`object expected, ${u} found`)];for(let e in r){let u;let p=e.split(".")[0],c=a[p]||a["*"];if(n[p])u=n[p];else if(a[p])u=l;else if(n["*"])u=n["*"];else if(a["*"])u=l;else{s.push(new ee(t,r[e],`unknown property "${e}"`));continue}s=s.concat(u({key:(t&&`${t}.`)+e,value:r[e],valueSpec:c,style:o,styleSpec:i,object:r,objectKey:e,validateSpec:l},r))}for(let e in a)n[e]||a[e].required&&void 0===a[e].default&&void 0===r[e]&&s.push(new ee(t,r,`missing required property "${e}"`));return s}function r_(e){let t=e.value,r=e.valueSpec,a=e.validateSpec,n=e.style,o=e.styleSpec,i=e.key,l=e.arrayElementValidator||a;if("array"!==rh(t))return[new ee(i,t,`array expected, ${rh(t)} found`)];if(r.length&&t.length!==r.length)return[new ee(i,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new ee(i,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let s={type:r.value,values:r.values};o.$version<7&&(s.function=r.function),"object"===rh(r.value)&&(s=r.value);let u=[];for(let r=0;r<t.length;r++)u=u.concat(l({array:t,arrayIndex:r,value:t[r],valueSpec:s,validateSpec:e.validateSpec,style:n,styleSpec:o,key:`${i}[${r}]`}));return u}function rC(e){let t=e.key,r=e.value,a=e.valueSpec,n=rh(r);return"number"===n&&r!=r&&(n="NaN"),"number"!==n?[new ee(t,r,`number expected, ${n} found`)]:"minimum"in a&&r<a.minimum?[new ee(t,r,`${r} is less than the minimum value ${a.minimum}`)]:"maximum"in a&&r>a.maximum?[new ee(t,r,`${r} is greater than the maximum value ${a.maximum}`)]:[]}function rL(e){let t=e.valueSpec,r=rw(e.value.type),a,n={},o,i,l="categorical"!==r&&void 0===e.value.property,s="array"===rh(e.value.stops)&&"array"===rh(e.value.stops[0])&&"object"===rh(e.value.stops[0][0]),u=rk({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new ee(e.key,e.value,'identity function may not have a "stops" property')];let t=[],a=e.value;return t=t.concat(r_({key:e.key,value:a,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===rh(a)&&0===a.length&&t.push(new ee(e.key,a,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&l&&u.push(new ee(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new ee(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!rd(e.valueSpec)&&u.push(new ee(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l||rp(e.valueSpec)?l&&!rc(e.valueSpec)&&u.push(new ee(e.key,e.value,"zoom functions not supported")):u.push(new ee(e.key,e.value,"property functions not supported"))),("categorical"===r||s)&&void 0===e.value.property&&u.push(new ee(e.key,e.value,'"property" property is required')),u;function p(e){let r=[],a=e.value,l=e.key;if("array"!==rh(a))return[new ee(l,a,`array expected, ${rh(a)} found`)];if(2!==a.length)return[new ee(l,a,`array length 2 expected, length ${a.length} found`)];if(s){if("object"!==rh(a[0]))return[new ee(l,a,`object expected, ${rh(a[0])} found`)];if(void 0===a[0].zoom)return[new ee(l,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new ee(l,a,"object stop key must have value")];if(i&&i>rw(a[0].zoom))return[new ee(l,a[0].zoom,"stop zoom values must appear in ascending order")];rw(a[0].zoom)!==i&&(i=rw(a[0].zoom),o=void 0,n={}),r=r.concat(rk({key:`${l}[0]`,value:a[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:rC,value:c}}))}else r=r.concat(c({key:`${l}[0]`,value:a[0],valueSpec:{},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},a));return rm(rS(a[1]))?r.concat([new ee(`${l}[1]`,a[1],"expressions are not allowed in function stops.")]):r.concat(e.validateSpec({key:`${l}[1]`,value:a[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function c(e,i){let l=rh(e.value),s=rw(e.value),u=null!==e.value?e.value:i;if(a){if(l!==a)return[new ee(e.key,u,`${l} stop domain type must match previous stop domain type ${a}`)]}else a=l;if("number"!==l&&"string"!==l&&"boolean"!==l)return[new ee(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==l&&"categorical"!==r){let a=`number expected, ${l} found`;return rp(t)&&void 0===r&&(a+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ee(e.key,u,a)]}return"categorical"!==r||"number"!==l||isFinite(s)&&Math.floor(s)===s?"categorical"!==r&&"number"===l&&void 0!==o&&s<o?[new ee(e.key,u,"stop domain values must appear in ascending order")]:(o=s,"categorical"===r&&s in n?[new ee(e.key,u,"stop domain values must be unique")]:(n[s]=!0,[])):[new ee(e.key,u,`integer expected, found ${s}`)]}}function rz(e){let t=("property"===e.expressionContext?function(e,t){let r=rg(e,t);if("error"===r.result)return r;let a=r.value.expression,n=ro(a);if(!n&&!rp(t))return ru([new er("","data expressions not supported")]);let o=rl(a,["zoom"]);if(!o&&!rc(t))return ru([new er("","zoom expressions not supported")]);let i=function e(t){let r=null;if(t instanceof e7)r=e(t.result);else if(t instanceof ty){for(let a of t.args)if(r=e(a))break}else(t instanceof tl||t instanceof td)&&t.input instanceof re&&"zoom"===t.input.name&&(r=t);return r instanceof er||t.eachChild(t=>{let a=e(t);a instanceof er?r=a:!r&&a?r=new er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&a&&r!==a&&(r=new er("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}(a);if(!i&&!o)return ru([new er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof er)return ru([i]);if(i instanceof td&&!rd(t))return ru([new er("",'"interpolate" expressions cannot be used with this property')]);if(!i)return rs(n?new rv("constant",r.value):new rv("source",r.value));let l=i instanceof td?i.interpolation:void 0;return rs(n?new rb("camera",r.value,i.labels,l):new rb("composite",r.value,i.labels,l))}:rg)(rS(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new ee(`${e.key}${t.key}`,e.value,t.message));let r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new ee(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!ri(r))return[new ee(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!ri(r))return[new ee(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!rl(r,["zoom","feature-state"]))return[new ee(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!ro(r))return[new ee(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function r$(e){let t=e.key,r=e.value,a=e.valueSpec,n=[];return Array.isArray(a.values)?-1===a.values.indexOf(rw(r))&&n.push(new ee(t,r,`expected one of [${a.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(a.values).indexOf(rw(r))&&n.push(new ee(t,r,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(r)} found`)),n}function rA(e){return!function e(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(let r of t.slice(1))if(!e(r)&&"boolean"!=typeof r)return!1;return!0;default:return!0}}(rS(e.value))?function e(t){let r=t.value,a=t.key;if("array"!==rh(r))return[new ee(a,r,`array expected, ${rh(r)} found`)];let n=t.styleSpec,o,i=[];if(r.length<1)return[new ee(a,r,"filter array must have at least 1 element")];switch(i=i.concat(r$({key:`${a}[0]`,value:r[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),rw(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&"$type"===rw(r[1])&&i.push(new ee(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":3!==r.length&&i.push(new ee(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&"string"!==(o=rh(r[1]))&&i.push(new ee(`${a}[1]`,r[1],`string expected, ${o} found`));for(let e=2;e<r.length;e++)o=rh(r[e]),"$type"===rw(r[1])?i=i.concat(r$({key:`${a}[${e}]`,value:r[e],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&i.push(new ee(`${a}[${e}]`,r[e],`string, number, or boolean expected, ${o} found`));break;case"any":case"all":case"none":for(let n=1;n<r.length;n++)i=i.concat(e({key:`${a}[${n}]`,value:r[n],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":o=rh(r[1]),2!==r.length?i.push(new ee(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):"string"!==o&&i.push(new ee(`${a}[1]`,r[1],`string expected, ${o} found`))}return i}(e):rz(et({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}}))}function rE(e,t){let r;let a=e.key,n=e.validateSpec,o=e.style,i=e.styleSpec,l=e.value,s=e.objectKey,u=i[`${t}_${e.layerType}`];if(!u)return[];let p=s.match(/^(.*)-transition$/);if("paint"===t&&p&&u[p[1]]&&u[p[1]].transition)return n({key:a,value:l,valueSpec:i.transition,style:o,styleSpec:i});let c=e.valueSpec||u[s];if(!c)return[new ee(a,l,`unknown property "${s}"`)];if("string"===rh(l)&&rp(c)&&!c.tokens&&(r=/^{([^}]+)}$/.exec(l)))return[new ee(a,l,`"${s}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(r[1])} }\`.`)];let d=[];return"symbol"===e.layerType&&("text-field"===s&&o&&!o.glyphs&&d.push(new ee(a,l,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&ry(rS(l))&&"identity"===rw(l.type)&&d.push(new ee(a,l,'"text-font" does not support identity functions'))),d.concat(n({key:e.key,value:l,valueSpec:c,style:o,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:s}))}function rM(e){return rE(e,"paint")}function rT(e){return rE(e,"layout")}function rq(e){let t=[],r=e.value,a=e.key,n=e.style,o=e.styleSpec;r.type||r.ref||t.push(new ee(a,r,'either "type" or "ref" is required'));let i=rw(r.type),l=rw(r.ref);if(r.id){let o=rw(r.id);for(let i=0;i<e.arrayIndex;i++){let e=n.layers[i];rw(e.id)===o&&t.push(new ee(a,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in r&&t.push(new ee(a,r[e],`"${e}" is prohibited for ref layers`))}),n.layers.forEach(t=>{rw(t.id)===l&&(e=t)}),e?e.ref?t.push(new ee(a,r.ref,"ref cannot reference another ref layer")):i=rw(e.type):t.push(new ee(a,r.ref,`ref layer "${l}" not found`))}else if("background"!==i){if(r.source){let e=n.sources&&n.sources[r.source],o=e&&rw(e.type);e?"vector"===o&&"raster"===i?t.push(new ee(a,r.source,`layer "${r.id}" requires a raster source`)):"raster-dem"!==o&&"hillshade"===i?t.push(new ee(a,r.source,`layer "${r.id}" requires a raster-dem source`)):"raster"===o&&"raster"!==i?t.push(new ee(a,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==o||r["source-layer"]?"raster-dem"===o&&"hillshade"!==i?t.push(new ee(a,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===i&&r.paint&&r.paint["line-gradient"]&&("geojson"!==o||!e.lineMetrics)&&t.push(new ee(a,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ee(a,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new ee(a,r.source,`source "${r.source}" not found`))}else t.push(new ee(a,r,'missing required property "source"'))}return t=t.concat(rk({key:a,value:r,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:`${a}.type`,value:r.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:r,objectKey:"type"}),filter:rA,layout:e=>rk({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>rT(et({layerType:i},e))}}),paint:e=>rk({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>rM(et({layerType:i},e))}})}}))}function rI(e){let t=e.value,r=e.key,a=rh(t);return"string"!==a?[new ee(r,t,`string expected, ${a} found`)]:[]}let rP={promoteId:function({key:e,value:t}){if("string"===rh(t))return rI({key:e,value:t});{let r=[];for(let a in t)r.push(...rI({key:`${e}.${a}`,value:t[a]}));return r}}};function rj(e){let t;let r=e.value,a=e.key,n=e.styleSpec,o=e.style,i=e.validateSpec;if(!r.type)return[new ee(a,r,'"type" is required')];let l=rw(r.type);switch(l){case"vector":case"raster":return rk({key:a,value:r,valueSpec:n[`source_${l.replace("-","_")}`],style:e.style,styleSpec:n,objectElementValidators:rP,validateSpec:i});case"raster-dem":return function(e){var t;let r=null!==(t=e.sourceName)&&void 0!==t?t:"",a=e.value,n=e.styleSpec,o=n.source_raster_dem,i=e.style,l=[],s=rh(a);if(void 0===a)return l;if("object"!==s)return l.push(new ee("source_raster_dem",a,`object expected, ${s} found`)),l;let u="custom"===rw(a.encoding),p=["redFactor","greenFactor","blueFactor","baseShift"],c=e.value.encoding?`"${e.value.encoding}"`:"Default";for(let t in a)!u&&p.includes(t)?l.push(new ee(t,a[t],`In "${r}": "${t}" is only valid when "encoding" is set to "custom". ${c} encoding found`)):o[t]?l=l.concat(e.validateSpec({key:t,value:a[t],valueSpec:o[t],validateSpec:e.validateSpec,style:i,styleSpec:n})):l.push(new ee(t,a[t],`unknown property "${t}"`));return l}({sourceName:a,value:r,style:e.style,styleSpec:n,validateSpec:i});case"geojson":if(t=rk({key:a,value:r,valueSpec:n.source_geojson,style:o,styleSpec:n,validateSpec:i,objectElementValidators:rP}),r.cluster)for(let e in r.clusterProperties){let[n,o]=r.clusterProperties[e],l="string"==typeof n?[n,["accumulated"],["get",e]]:n;t.push(...rz({key:`${a}.${e}.map`,value:o,validateSpec:i,expressionContext:"cluster-map"})),t.push(...rz({key:`${a}.${e}.reduce`,value:l,validateSpec:i,expressionContext:"cluster-reduce"}))}return t;case"video":return rk({key:a,value:r,valueSpec:n.source_video,style:o,validateSpec:i,styleSpec:n});case"image":return rk({key:a,value:r,valueSpec:n.source_image,style:o,validateSpec:i,styleSpec:n});case"canvas":return[new ee(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return r$({key:`${a}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:o,validateSpec:i,styleSpec:n})}}function rN(e){let t=e.value,r=e.styleSpec,a=r.light,n=e.style,o=[],i=rh(t);if(void 0===t)return o;if("object"!==i)return o.concat([new ee("light",t,`object expected, ${i} found`)]);for(let i in t){let l=i.match(/^(.*)-transition$/);o=l&&a[l[1]]&&a[l[1]].transition?o.concat(e.validateSpec({key:i,value:t[i],valueSpec:r.transition,validateSpec:e.validateSpec,style:n,styleSpec:r})):a[i]?o.concat(e.validateSpec({key:i,value:t[i],valueSpec:a[i],validateSpec:e.validateSpec,style:n,styleSpec:r})):o.concat([new ee(i,t[i],`unknown property "${i}"`)])}return o}function rO(e){let t=e.value,r=e.styleSpec,a=r.sky,n=e.style,o=rh(t);if(void 0===t)return[];if("object"!==o)return[new ee("sky",t,`object expected, ${o} found`)];let i=[];for(let o in t)i=a[o]?i.concat(e.validateSpec({key:o,value:t[o],valueSpec:a[o],style:n,styleSpec:r})):i.concat([new ee(o,t[o],`unknown property "${o}"`)]);return i}function rU(e){let t=e.value,r=e.styleSpec,a=r.terrain,n=e.style,o=[],i=rh(t);if(void 0===t)return o;if("object"!==i)return o.concat([new ee("terrain",t,`object expected, ${i} found`)]);for(let i in t)o=a[i]?o.concat(e.validateSpec({key:i,value:t[i],valueSpec:a[i],validateSpec:e.validateSpec,style:n,styleSpec:r})):o.concat([new ee(i,t[i],`unknown property "${i}"`)]);return o}function rR(e){let t=[],r=e.value,a=e.key;if(!Array.isArray(r))return rI({key:a,value:r});{let n=[],o=[];for(let i in r){r[i].id&&n.includes(r[i].id)&&t.push(new ee(a,r,`all the sprites' ids must be unique, but ${r[i].id} is duplicated`)),n.push(r[i].id),r[i].url&&o.includes(r[i].url)&&t.push(new ee(a,r,`all the sprites' URLs must be unique, but ${r[i].url} is duplicated`)),o.push(r[i].url);let l={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(rk({key:`${a}[${i}]`,value:r[i],valueSpec:l,validateSpec:e.validateSpec}))}return t}}let rF={"*":()=>[],array:r_,boolean:function(e){let t=e.value,r=e.key,a=rh(t);return"boolean"!==a?[new ee(r,t,`boolean expected, ${a} found`)]:[]},number:rC,color:function(e){let t=e.key,r=e.value,a=rh(r);return"string"!==a?[new ee(t,r,`color expected, ${a} found`)]:eF.parse(String(r))?[]:[new ee(t,r,`color expected, "${r}" found`)]},constants:rx,enum:r$,filter:rA,function:rL,layer:rq,object:rk,source:rj,light:rN,sky:rO,terrain:rU,projection:function(e){let t=e.value,r=e.styleSpec,a=r.projection,n=e.style,o=rh(t);if(void 0===t)return[];if("object"!==o)return[new ee("projection",t,`object expected, ${o} found`)];let i=[];for(let o in t)i=a[o]?i.concat(e.validateSpec({key:o,value:t[o],valueSpec:a[o],style:n,styleSpec:r})):i.concat([new ee(o,t[o],`unknown property "${o}"`)]);return i},string:rI,formatted:function(e){return 0===rI(e).length?[]:rz(e)},resolvedImage:function(e){return 0===rI(e).length?[]:rz(e)},padding:function(e){let t=e.key,r=e.value;if("array"!==rh(r))return rC({key:t,value:r,valueSpec:{}});{if(r.length<1||r.length>4)return[new ee(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];let a={type:"number"},n=[];for(let o=0;o<r.length;o++)n=n.concat(e.validateSpec({key:`${t}[${o}]`,value:r[o],validateSpec:e.validateSpec,valueSpec:a}));return n}},variableAnchorOffsetCollection:function(e){let t=e.key,r=e.value,a=rh(r),n=e.styleSpec;if("array"!==a||r.length<1||r.length%2!=0)return[new ee(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let a=0;a<r.length;a+=2)o=(o=o.concat(r$({key:`${t}[${a}]`,value:r[a],valueSpec:n.layout_symbol["text-anchor"]}))).concat(r_({key:`${t}[${a+1}]`,value:r[a+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:n}));return o},sprite:rR};function rD(e){let t=e.value,r=e.valueSpec,a=e.styleSpec;return e.validateSpec=rD,r.expression&&ry(rw(t))?rL(e):r.expression&&rm(rS(t))?rz(e):r.type&&rF[r.type]?rF[r.type](e):rk(et({},e,{valueSpec:r.type?a[r.type]:r}))}function rB(e){let t=e.value,r=e.key,a=rI(e);return a.length||(-1===t.indexOf("{fontstack}")&&a.push(new ee(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&a.push(new ee(r,t,'"glyphs" url must include a "{range}" token'))),a}function rH(e,t=Q){let r=[];return r=r.concat(rD({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:rD,objectElementValidators:{glyphs:rB,"*":()=>[]}})),e.constants&&(r=r.concat(rx({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:rD}))),rG(r)}function rV(e){return function(t){return e({...t,validateSpec:rD})}}function rG(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function rZ(e){return function(...t){return rG(e.apply(this,t))}}function rW(e){if(!e)return{style:f.UH[f.yR[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if("string"==typeof e){let t=function(e){try{let t=JSON.parse(e),r=rH(t);return{isValidJSON:!0,isValidStyle:0===r.length,styleObject:0===r.length?t:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}(e);return t.isValidStyle?{style:t.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:t.isValidJSON?{style:f.UH[f.yR[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:e.startsWith("http")?{style:e,requiresUrlMonitoring:!0,isFallback:!1}:e.toLowerCase().includes(".json")?{style:function(e){try{return new URL(e).href}catch{}return new URL(e,location.origin).href}(e),requiresUrlMonitoring:!0,isFallback:!1}:{style:(0,f.HI)(e),requiresUrlMonitoring:!0,isFallback:!1}}return e instanceof f.YW?{style:e.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:e instanceof f.jD?{style:e.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:0===rH(e).length?{style:e,requiresUrlMonitoring:!1,isFallback:!1}:{style:f.UH[f.yR[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}rH.source=rZ(rV(rj)),rH.sprite=rZ(rV(rR)),rH.glyphs=rZ(rV(rB)),rH.light=rZ(rV(rN)),rH.sky=rZ(rV(rO)),rH.terrain=rZ(rV(rU)),rH.layer=rZ(rV(rq)),rH.filter=rZ(rV(rA)),rH.paintProperty=rZ(rV(rM)),rH.layoutProperty=rZ(rV(rT));class rK{constructor(){S(this,"_map"),S(this,"_container"),S(this,"_terrainButton"),function(e,t){for(let r of e)"function"==typeof t[r]&&(t[r]=t[r].bind(t))}(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=F("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=F("button","maplibregl-ctrl-terrain",this._container),F("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){D(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class rJ extends Z{constructor(e={}){super({showCompass:e.showCompass??!0,showZoom:e.showZoom??!0,visualizePitch:e.visualizePitch??!0}),S(this,"_rotateCompassArrow",()=>{let e=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(this._map.transform.pitch*(Math.PI/180))**.5)}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",e=>{0===this._map.getPitch()?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}))}_createButton(e,t){let r=super._createButton(e,t);return r.clickFunction=t,r}}let rY=y.Marker,rX=y.LngLat,rQ=y.LngLatBounds;class r0 extends W{constructor(){super(...arguments),S(this,"lastUpdatedCenter",new rX(0,0)),S(this,"_updateCamera",e=>{var t,r;let a=new rX(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,o={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},i=this._map.getZoom();i>((null==(r=null==(t=this.options)?void 0:t.fitBoundsOptions)?void 0:r.maxZoom)??30)&&(o.zoom=i),this._map.fitBounds(rQ.fromLngLat(a,n),o,{geolocateSource:!0});let l=!1,s=()=>{l=!0};this._map.once("click",s),this._map.once("dblclick",s),this._map.once("dragstart",s),this._map.once("mousedown",s),this._map.once("touchstart",s),this._map.once("wheel",s),this._map.once("moveend",()=>{this._map.off("click",s),this._map.off("dblclick",s),this._map.off("dragstart",s),this._map.off("mousedown",s),this._map.off("touchstart",s),this._map.off("wheel",s),l||(this.lastUpdatedCenter=this._map.getCenter())})}),S(this,"_finishSetupUI",e=>{if(this._map){if(!1===e){let e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{let e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new rY({element:this._dotElement}),this._circleElement=F("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new rY({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",e=>{let t=e.originalEvent&&"resize"===e.originalEvent.type,r=this.lastUpdatedCenter.distanceTo(this._map.getCenter());e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t||!(r>1)||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),S(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if("BACKGROUND"!==this._watchState&&"ACTIVE_LOCK"!==this._watchState)return;let e=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],t=this._map.project(e),r=this._map.unproject([t.x,t.y]),a=this._map.unproject([t.x+20,t.y]),n=r.distanceTo(a)/20,o=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}}class r1{constructor(e,t){C(this,p),C(this,n),S(this,"map"),C(this,o),C(this,i),C(this,l),C(this,s,!1),C(this,u),void 0!==e.style&&L(this,s,!0),L(this,n,{zoomAdjust:-4,position:"top-right",...t,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...e,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...e.containerStyle??{}}}),void 0!==e.lockZoom&&(_(this,n).minZoom=e.lockZoom,_(this,n).maxZoom=e.lockZoom)}setStyle(e,t){_(this,s)||this.map.setStyle(e,t),z(this,p,d).call(this)}addLayer(e,t){return _(this,s)||this.map.addLayer(e,t),z(this,p,d).call(this),this.map}moveLayer(e,t){return _(this,s)||this.map.moveLayer(e,t),z(this,p,d).call(this),this.map}removeLayer(e){return _(this,s)||this.map.removeLayer(e),z(this,p,d).call(this),this}setLayerZoomRange(e,t,r){return _(this,s)||this.map.setLayerZoomRange(e,t,r),z(this,p,d).call(this),this}setFilter(e,t,r){return _(this,s)||this.map.setFilter(e,t,r),z(this,p,d).call(this),this}setPaintProperty(e,t,r,a){return _(this,s)||this.map.setPaintProperty(e,t,r,a),z(this,p,d).call(this),this}setLayoutProperty(e,t,r,a){return _(this,s)||this.map.setLayoutProperty(e,t,r,a),z(this,p,d).call(this),this}setGlyphs(e,t){return _(this,s)||this.map.setGlyphs(e,t),z(this,p,d).call(this),this}onAdd(e){for(let[t,r]of(L(this,o,e),L(this,i,F("div","maplibregl-ctrl maplibregl-ctrl-group")),Object.entries(_(this,n).containerStyle)))_(this,i).style.setProperty(t,r);return _(this,n).container=_(this,i),_(this,n).zoom=e.getZoom()+_(this,n).zoomAdjust,this.map=new r5(_(this,n)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{z(this,p,c).call(this,_(this,n).parentRect),L(this,u,z(this,p,h).call(this))}),_(this,i)}onRemove(){var e;null==(e=_(this,u))||e.call(this),D(_(this,i))}}n=new WeakMap,o=new WeakMap,i=new WeakMap,l=new WeakMap,s=new WeakMap,u=new WeakMap,p=new WeakSet,c=function(e){void 0===e||void 0===e.linePaint&&void 0===e.fillPaint||(L(this,l,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:_(this,l)}),(void 0!==e.lineLayout||void 0!==e.linePaint)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),void 0!==e.fillPaint&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),z(this,p,d).call(this))},d=function(){if(void 0===_(this,l))return;let{devicePixelRatio:e}=window,t=_(this,o).getCanvas(),r=t.width/e,a=t.height/e,n=_(this,o).unproject.bind(_(this,o)),i=n([0,0]),s=n([r,0]),u=n([0,a]),p=n([r,a]);_(this,l).geometry.coordinates=[[u.toArray(),p.toArray(),s.toArray(),i.toArray(),u.toArray()]],this.map.getSource("parentRect").setData(_(this,l))},h=function(){let{pitchAdjust:e}=_(this,n),t=()=>{l("parent")},r=()=>{l("minimap")},a=()=>{_(this,o).on("move",t),this.map.on("move",r)},i=()=>{_(this,o).off("move",t),this.map.off("move",r)},l=t=>{i();let r="parent"===t?_(this,o):this.map,l="parent"===t?this.map:_(this,o),s=r.getCenter(),u=r.getZoom()+_(this,n).zoomAdjust*("parent"===t?1:-1),c=r.getBearing(),h=r.getPitch();l.jumpTo({center:s,zoom:u,bearing:c,pitch:e?h:0}),z(this,p,d).call(this),a()};return a(),()=>{i()}};let r2={COUNTRY:"COUNTRY"};class r5 extends y.Map{constructor(e){(function(e){let t=document.createElement("canvas").getContext("webgl2")?null:"u">typeof WebGL2RenderingContext?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed.";if(!t)return;let r=null;if("string"==typeof e?r=document.getElementById(e):e instanceof HTMLElement&&(r=e),!r)throw Error("The Map container must be provided.");let a=document.createElement("div");throw a.innerHTML=t,a.classList.add("webgl-warning-div"),r.appendChild(a),Error(t)})(e.container),e.apiKey&&(q.apiKey=e.apiKey);let{style:t,requiresUrlMonitoring:r,isFallback:a}=rW(e.style);a&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),q.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");let n=location.hash,o={compact:!1};e.customAttribution?o.customAttribution=e.customAttribution:e.attributionControl&&"object"==typeof e.attributionControl&&(o={...o,...e.attributionControl});let i={...e,style:t,maplibreLogo:!1,transformRequest:H(e.transformRequest),attributionControl:!0!==e.forceNoAttributionControl&&o};delete i.style,super(i),S(this,"isTerrainEnabled",!1),S(this,"terrainExaggeration",1),S(this,"primaryLanguage"),S(this,"terrainGrowing",!1),S(this,"terrainFlattening",!1),S(this,"minimap"),S(this,"forceLanguageUpdate"),S(this,"languageAlwaysBeenStyle"),S(this,"isReady",!1),S(this,"terrainAnimationDuration",1e3),S(this,"monitoredStyleUrls"),S(this,"styleInProcess",!1),S(this,"originalLabelStyle",new window.Map),S(this,"isStyleLocalized",!1),this.setStyle(t),r&&this.monitorStyleUrl(t);let l=()=>{let e="The distant style could not be loaded.";this.getStyle()?e+="Leaving the style as is.":(this.setStyle(f.UH.STREETS),e+=`Loading default MapTiler Cloud style "${f.UH.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(e)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",e=>{if(e.error instanceof y.AJAXError){let t=new URL(e.error.url);t.search="";let r=t.href;this.monitoredStyleUrls.has(r)&&(this.monitoredStyleUrls.delete(r),l());return}if(this.styleInProcess)return l()}),q.caching&&!N&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),q.caching&&N&&(I(P,async(e,t)=>{if(!e.url)throw Error("");e.url=e.url.replace(`${P}://`,"https://"),e.signal=t.signal;let r=await fetch(e.url,e),a=await r.json();return a.tiles&&a.tiles.length>0&&(a.tiles[0]+=`&last-modified=${r.headers.get("Last-Modified")}`),{data:a,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}}),I(j,async(e,t)=>{if(!e.url)throw Error("");e.url=e.url.replace(`${j}://`,"https://");let r=new URL(e.url),a=new URL(r);a.searchParams.delete("mtsid"),a.searchParams.delete("key");let n=a.toString(),o=new URL(r);o.searchParams.delete("last-modified");let i=o.toString(),l=async e=>({data:await e.arrayBuffer(),cacheControl:e.headers.get("Cache-Control"),expires:e.headers.get("Expires")}),s=await O(),u=await s.match(n);if(u)return l(u);e.signal=t.signal;let p=await fetch(i,e);return p.status>=200&&p.status<300&&(s.put(n,p.clone()).catch(()=>{}),++U>100&&(R(),U=0)),l(p)})),typeof e.language>"u")this.primaryLanguage=q.primaryLanguage;else{let t=(0,f.eS)(e.language,$);this.primaryLanguage=t??q.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===$.STYLE||this.primaryLanguage===$.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===$.STYLE,this.terrainExaggeration=e.terrainExaggeration??this.terrainExaggeration,this.once("styledata",async()=>{let t;if(e.geolocate&&!e.center&&(!e.hash||!n)){try{if(e.geolocate===r2.COUNTRY){await this.fitToIpBounds();return}}catch(e){console.warn(e.message)}try{await this.centerOnIpPoint(e.zoom),t=this.getCameraHash()}catch(e){console.warn(e.message)}"granted"===(await navigator.permissions.query({name:"geolocation"})).state&&navigator.geolocation.getCurrentPosition(r=>{t===this.getCameraHash()&&(this.terrain?this.easeTo({center:[r.coords.longitude,r.coords.latitude],zoom:e.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[r.coords.longitude,r.coords.latitude],zoom:e.zoom||12,duration:2e3})}))},null,{maximumAge:864e5,timeout:5e3,enableHighAccuracy:!1})}}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{null===this.getTerrain()&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let t={logo:null};try{let e=Object.keys(this.style.sourceCaches).map(e=>this.getSource(e)).filter(e=>e&&"url"in e&&"string"==typeof e.url&&(null==e?void 0:e.url.includes("tiles.json"))),r=new URL(e[0].url);r.searchParams.has("key")||r.searchParams.append("key",q.apiKey),t=await (await fetch(r.href)).json()}catch{}if(!0!==e.forceNoAttributionControl){if("logo"in t&&t.logo){let r=t.logo;this.addControl(new X({logoURL:r}),e.logoPosition)}else e.maptilerLogo&&this.addControl(new X,e.logoPosition)}if(e.scaleControl){let t=!0===e.scaleControl||void 0===e.scaleControl?"bottom-right":e.scaleControl,r=new J({unit:q.unit});this.addControl(r,t),q.on("unit",e=>{r.setUnit(e)})}if(!1!==e.navigationControl){let t=!0===e.navigationControl||void 0===e.navigationControl?"top-right":e.navigationControl;this.addControl(new rJ,t)}if(!1!==e.geolocateControl){let t=!0===e.geolocateControl||void 0===e.geolocateControl?"top-right":e.geolocateControl;this.addControl(new r0({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),t)}if(e.terrainControl){let t=!0===e.terrainControl||void 0===e.terrainControl?"top-right":e.terrainControl;this.addControl(new rK,t)}if(e.fullscreenControl){let t=!0===e.fullscreenControl||void 0===e.fullscreenControl?"top-right":e.fullscreenControl;this.addControl(new Y({}),t)}this.isReady=!0,this.fire("ready",{target:this})});let s=!1,u=!1,p;this.once("ready",()=>{s=!0,u&&this.fire("loadWithTerrain",p)}),this.once("style.load",()=>{let{minimap:t}=e;if("object"==typeof t){let{zoom:r,center:a,style:n,language:o,apiKey:i,maptilerLogo:l,antialias:s,refreshExpiredTiles:u,maxBounds:p,scrollZoom:c,minZoom:d,maxZoom:h,boxZoom:y,locale:f,fadeDuration:m,crossSourceCollisions:g,clickTolerance:v,bounds:b,fitBoundsOptions:x,pixelRatio:w,validateStyle:S}=e;this.minimap=new r1(t,{zoom:r,center:a,style:n,language:o,apiKey:i,container:"null",maptilerLogo:l,antialias:s,refreshExpiredTiles:u,maxBounds:p,scrollZoom:c,minZoom:d,maxZoom:h,boxZoom:y,locale:f,fadeDuration:m,crossSourceCollisions:g,clickTolerance:v,bounds:b,fitBoundsOptions:x,pixelRatio:w,validateStyle:S}),this.addControl(this.minimap,t.position??"bottom-left")}else!0===t?(this.minimap=new r1({},e),this.addControl(this.minimap,"bottom-left")):void 0!==t&&!1!==t&&(this.minimap=new r1({},e),this.addControl(this.minimap,t))});let c=e=>{e.terrain&&(u=!0,p={type:"loadWithTerrain",target:this,terrain:e.terrain},this.off("terrain",c),s&&this.fire("loadWithTerrain",p))};this.on("terrain",c),e.terrain&&this.enableTerrain(e.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",t=>{console.warn(t),function(e){let t=null;if("string"==typeof e?t=document.getElementById(e):e instanceof HTMLElement&&(t=e),!t)throw Error("The Map container must be provided.");let r=document.createElement("div");r.innerHTML="The WebGL context was lost.",r.classList.add("webgl-warning-div"),t.appendChild(r)}(e.container),this.fire("webglContextLost",{error:t})})})}setTerrainAnimationDuration(e){this.terrainAnimationDuration=Math.max(e,0)}async onLoadAsync(){return new Promise(e=>{if(this.loaded())return e(this);this.once("load",()=>{e(this)})})}async onReadyAsync(){return new Promise(e=>{if(this.isReady)return e(this);this.once("ready",()=>{e(this)})})}async onLoadWithTerrainAsync(){return new Promise(e=>{if(this.isReady&&this.terrain)return e(this);this.once("loadWithTerrain",()=>{e(this)})})}monitorStyleUrl(e){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);let t=new URL(e);t.search="",this.monitoredStyleUrls.add(t.href)}setStyle(e,t){var r;this.originalLabelStyle.clear(),null==(r=this.minimap)||r.setStyle(e),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});let a=rW(e);if(a.requiresUrlMonitoring&&this.monitorStyleUrl(a.style),a.isFallback){if(this.getStyle())return console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}return this.styleInProcess=!0,super.setStyle(a.style,t),this}addLayer(e,t){var r;return null==(r=this.minimap)||r.addLayer(e,t),super.addLayer(e,t)}moveLayer(e,t){var r;return null==(r=this.minimap)||r.moveLayer(e,t),super.moveLayer(e,t)}removeLayer(e){var t;return null==(t=this.minimap)||t.removeLayer(e),super.removeLayer(e)}setLayerZoomRange(e,t,r){var a;return null==(a=this.minimap)||a.setLayerZoomRange(e,t,r),super.setLayerZoomRange(e,t,r)}setFilter(e,t,r){var a;return null==(a=this.minimap)||a.setFilter(e,t,r),super.setFilter(e,t,r)}setPaintProperty(e,t,r,a){var n;return null==(n=this.minimap)||n.setPaintProperty(e,t,r,a),super.setPaintProperty(e,t,r,a)}setLayoutProperty(e,t,r,a){var n;return null==(n=this.minimap)||n.setLayoutProperty(e,t,r,a),super.setLayoutProperty(e,t,r,a)}setGlyphs(e,t){var r;return null==(r=this.minimap)||r.setGlyphs(e,t),super.setGlyphs(e,t)}getStyleLanguage(){return this.style.stylesheet.metadata&&"object"==typeof this.style.stylesheet.metadata&&"maptiler:language"in this.style.stylesheet.metadata&&"string"==typeof this.style.stylesheet.metadata["maptiler:language"]?(0,f.S3)(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(e){var t,r;null==(r=null==(t=this.minimap)?void 0:t.map)||r.setLanguage(e),this.onStyleReady(()=>{this.setPrimaryLanguage(e)})}setPrimaryLanguage(e){let t=this.getStyleLanguage(),r=(0,f.eS)(e,$);if(!r){console.warn(`The language "${r}" is not supported.`);return}if(!(r.flag===$.STYLE.flag&&t&&(t.flag===$.AUTO.flag||t.flag===$.VISITOR.flag))&&(r.flag!==$.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===r&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===$.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=r;let a=r;if(r.flag===$.STYLE.flag){if(!t){console.warn("The style has no default languages or has an invalid one.");return}a=t}let n=$.LOCAL.flag,o=["get",n];o=a.flag===$.VISITOR.flag?["case",["all",["has",n=A().flag],["has",$.LOCAL.flag]],["case",["==",["get",n],["get",$.LOCAL.flag]],["get",$.LOCAL.flag],["format",["get",n],{"font-scale":.8},`
`,["get",$.LOCAL.flag],{"font-scale":1.1}]],["get",$.LOCAL.flag]]:a.flag===$.VISITOR_ENGLISH.flag?["case",["all",["has",n=$.ENGLISH.flag],["has",$.LOCAL.flag]],["case",["==",["get",n],["get",$.LOCAL.flag]],["get",$.LOCAL.flag],["format",["get",n],{"font-scale":.8},`
`,["get",$.LOCAL.flag],{"font-scale":1.1}]],["get",$.LOCAL.flag]]:a.flag===$.AUTO.flag?["coalesce",["get",n=A().flag],["get",$.LOCAL.flag]]:a===$.LOCAL?["get",n=$.LOCAL.flag]:["coalesce",["get",n=a.flag],["get",$.LOCAL.flag]];let{layers:i}=this.getStyle(),l=0===this.originalLabelStyle.size;if(l){let e=function(e,t){let r=[];for(let a of e){if("symbol"!==a.type)continue;let{id:e,layout:n}=a;if(!n||!("text-field"in n))continue;let o=t.getLayoutProperty(e,"text-field");if(o){if("string"==typeof o){let e=function(e){var t;let r=/\{name(?:\:(?<language>\S+))?\}/g,a=[];for(;;){let n=r.exec(e);if(!n)break;let o=(null==(t=n.groups)?void 0:t.language)??null;a.push(o)}return a}(o);r.push(e)}else{let e=function(e){let t=[],r=structuredClone(e),a=e=>{if("string"!=typeof e)for(let n=0;n<e.length;n+=1){var r;let o=Array.isArray(r=e[n])&&2===r.length&&"get"===r[0]&&"string"==typeof r[1]?"name"===r[1].trim()?{isLanguage:!0,localization:null}:r[1].trim().startsWith("name:")?{isLanguage:!0,localization:r[1].trim().split(":").pop()}:null:null;o?t.push(o.localization):a(e[n])}};return a([r]),t}(o);r.push(e)}}}let a=r.flat(),n={unlocalized:0,localized:{}};for(let e of a)null===e?n.unlocalized+=1:(e in n.localized||(n.localized[e]=0),n.localized[e]+=1);return n}(i,this);this.isStyleLocalized=Object.keys(e.localized).length>0}for(let e of i){let t;if("symbol"!==e.type)continue;let r=this.getSource(e.source);if(!r||!("url"in r&&"string"==typeof r.url)||new URL(r.url).host!==E.maptilerApiHost)continue;let{id:a,layout:n}=e;if(n&&"text-field"in n){if(l?(t=this.getLayoutProperty(a,"text-field"),this.originalLabelStyle.set(a,t)):t=this.originalLabelStyle.get(a),"string"==typeof t){let{contains:e,exactMatch:r}=function(e,t){let r=t?/\{name:\S+\}/:/\{name\}/;return{contains:r.test(e),exactMatch:RegExp(`^${r.source}$`).test(e)}}(t,this.isStyleLocalized);if(!e)continue;if(r)this.setLayoutProperty(a,"text-field",o);else{let e=function(e,t,r){let a=e.split(r?/\{name:\S+\}/:/\{name\}/);return["concat",...a.flatMap((e,r)=>r===a.length-1?[e]:[e,t])]}(t,o,this.isStyleLocalized);this.setLayoutProperty(a,"text-field",e)}}else{let e=function(e,t,r){let a=structuredClone(e),n=e=>{if("string"!=typeof e)for(let a=0;a<e.length;a+=1)V(e[a],r)?e[a]=structuredClone(t):n(e[a])};return V(a,r)?t:(n(a),a)}(t,o,this.isStyleLocalized);this.setLayoutProperty(a,"text-field",e)}}}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(e){if(!this.terrain)return;let t=performance.now(),r=this.terrain.exaggeration,a=e-r,n=()=>{if(!this.terrain||this.terrainFlattening)return;let o=(performance.now()-t)/this.terrainAnimationDuration;o<.99?(this.terrain.exaggeration=r+(1-(1-o)**4)*a,requestAnimationFrame(n)):(this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=e,this.fire("terrainAnimationStop",{terrain:this.terrain})),this._elevationFreeze=!1,this.triggerRepaint()};this.terrainGrowing||this.terrainFlattening||this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(n)}enableTerrain(e=this.terrainExaggeration){if(e<0){console.warn("Terrain exaggeration cannot be negative.");return}let t=async r=>{this.terrain&&"data"===r.type&&"source"===r.dataType&&"source"in r&&"maptiler-terrain"===r.sourceId&&"raster-dem"===r.source.type&&r.isSourceLoaded&&(this.off("data",t),this.growTerrain(e))},r=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=e,this.on("data",t),this.addSource(E.terrainSourceId,{type:"raster-dem",url:E.terrainSourceURL}),this.setTerrain({source:E.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(e);return}this.loaded()||this.isTerrainEnabled?r():this.once("load",()=>{this.getTerrain()&&this.getSource(E.terrainSourceId)||r()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;let e=performance.now(),t=this.terrain.exaggeration,r=()=>{if(!this.terrain||this.terrainGrowing)return;let a=(performance.now()-e)/this.terrainAnimationDuration;(this._elevationFreeze=!1,a<.99)?(this.terrain.exaggeration=t*(1-a)**4,requestAnimationFrame(r)):(this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(E.terrainSourceId)&&this.removeSource(E.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null})),this.triggerRepaint()};this.terrainGrowing||this.terrainFlattening||this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(r)}setTerrainExaggeration(e,t=!0){!t&&this.terrain?(this.terrainExaggeration=e,this.terrain.exaggeration=e,this.triggerRepaint()):this.enableTerrain(e)}onStyleReady(e){this.isStyleLoaded()?e():this.once("styledata",()=>{e()})}async fitToIpBounds(){let e=await f.DP.info();this.fitBounds(e.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(e){let t=await f.DP.info();this.jumpTo({center:[(null==t?void 0:t.longitude)??0,(null==t?void 0:t.latitude)??0],zoom:e||11})}getCameraHash(){let e=new Float32Array(5),t=this.getCenter();return e[0]=t.lng,e[1]=t.lat,e[2]=this.getZoom(),e[3]=this.getPitch(),e[4]=this.getBearing(),v.DS.fromUint8Array(new Uint8Array(e.buffer))}getSdkConfig(){return q}getMaptilerSessionId(){return M}setTransformRequest(e){return super.setTransformRequest(H(e)),this}}function r3(e){let t=e.toString(16);return 1===t.length?`0${t}`:t}class r4 extends Array{constructor(e={}){super(),S(this,"min",0),S(this,"max",1),"min"in e&&(this.min=e.min),"max"in e&&(this.max=e.max),"stops"in e&&this.setStops(e.stops,{clone:!1})}static fromArrayDefinition(e){return new r4({stops:e.map(e=>({value:e[0],color:e[1]}))})}setStops(e,t={clone:!0}){let r=t.clone?this.clone():this;r.length=0;let a=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let t=0;t<e.length;t+=1)a=Math.min(a,e[t].value),n=Math.max(n,e[t].value),r.push({value:e[t].value,color:e[t].color.slice()});return r.sort((e,t)=>e.value<t.value?-1:1),this.min=a,this.max=n,r}scale(e,t,r={clone:!0}){let a=r.clone,n=this[0].value,o=this.at(-1).value-n,i=t-e,l=[];for(let t=0;t<this.length;t+=1){let r=(this[t].value-n)/o*i+e;a?l.push({value:r,color:this[t].color.slice()}):this[t].value=r}return a?new r4({stops:l}):this}at(e){return e<0?this[this.length+e]:this[e]}clone(){return new r4({stops:this.getRawColorStops()})}getRawColorStops(){let e=[];for(let t=0;t<this.length;t+=1)e.push({value:this[t].value,color:this[t].color});return e}reverse(e={clone:!0}){let t=e.clone?this.clone():this;for(let e=0;e<~~(t.length/2);e+=1){let r=t[e].color;t[e].color=t.at(-(e+1)).color,t.at(-(e+1)).color=r}return t}getBounds(){return{min:this.min,max:this.max}}getColor(e,t={smooth:!0}){if(e<=this[0].value)return this[0].color;if(e>=this.at(-1).value)return this.at(-1).color;for(let r=0;r<this.length-1;r+=1){if(e>this[r+1].value)continue;let a=this[r].color;if(!t.smooth)return a.slice();let n=this[r].value,o=this[r+1].value,i=this[r+1].color,l=(o-e)/(o-n);return a.map((e,t)=>Math.round(e*l+i[t]*(1-l)))}return[0,0,0]}getColorHex(e,t={smooth:!0,withAlpha:!1}){var r;return r=this.getColor(e,t),`#${r3(r[0])}${r3(r[1])}${r3(r[2])}${4===r.length?r3(r[3]):""}`}getColorRelative(e,t={smooth:!0}){let r=this.getBounds();return this.getColor(r.min+e*(r.max-r.min),t)}getCanvasStrip(e={horizontal:!0,size:512,smooth:!0}){let t=document.createElement("canvas");t.width=e.horizontal?e.size:1,t.height=e.horizontal?1:e.size;let r=t.getContext("2d");if(!r)throw Error("Canvs context is missing");let a=r.getImageData(0,0,t.width,t.height),n=a.data,o=e.size,i=this[0].value,l=(this.at(-1).value-i)/o;for(let t=0;t<o;t+=1){let r=this.getColor(i+t*l,{smooth:e.smooth});n[4*t]=r[0],n[4*t+1]=r[1],n[4*t+2]=r[2],n[4*t+3]=r.length>3?r[3]:255}return r.putImageData(a,0,0),t}resample(e,t=15){let r;let a=this.getBounds(),n=this.scale(0,1),o=1/(t-1);if("ease-in-square"===e)r=Array.from({length:t},(e,t)=>{let r=t*o,a=n.getColor(r**2);return{value:r,color:a}});else if("ease-out-square"===e)r=Array.from({length:t},(e,t)=>{let r=t*o,a=n.getColor(1-(1-r)**2);return{value:r,color:a}});else if("ease-out-sqrt"===e)r=Array.from({length:t},(e,t)=>{let r=t*o,a=n.getColor(r**.5);return{value:r,color:a}});else if("ease-in-sqrt"===e)r=Array.from({length:t},(e,t)=>{let r=t*o,a=n.getColor(1-(1-r)**.5);return{value:r,color:a}});else if("ease-out-exp"===e)r=Array.from({length:t},(e,t)=>{let r=t*o,a=n.getColor(1-2**(-10*r));return{value:r,color:a}});else if("ease-in-exp"===e)r=Array.from({length:t},(e,t)=>{let r=t*o,a=n.getColor(2**(10*r-10));return{value:r,color:a}});else throw Error("Invalid ressampling method.");return new r4({stops:r}).scale(a.min,a.max)}transparentStart(){let e=this.getRawColorStops();for(let t of(e.unshift({value:e[0].value,color:e[0].color.slice()}),e[1].value+=.001,e))3===t.color.length&&t.color.push(255);return e[0].color[3]=0,new r4({stops:e})}hasTransparentStart(){return 4===this[0].color.length&&0===this[0].color[3]}}new r4({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new r4({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new r4({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new r4({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new r4({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new r4({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new r4({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new r4({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new r4({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new r4({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new r4({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new r4({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new r4({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new r4({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new r4({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new r4({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new r4({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new r4({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new r4({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new r4({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new r4({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new r4({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new r4({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new r4({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new r4({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new r4({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new r4({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new r4({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new r4({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new r4({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new r4({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new r4({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new r4({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new r4({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new r4({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new r4({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new r4({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new r4({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new r4({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new r4({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new r4({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new r4({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new r4({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new r4({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new r4({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new r4({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new r4({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new r4({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new r4({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]}),function(){if(typeof window>"u")return;let e=y.getRTLTextPluginStatus();if("unavailable"===e||"requested"===e)try{y.setRTLTextPlugin(E.rtlPluginURL,!0)}catch{}}(),y.Map,y.Marker,y.Popup,y.Style,y.CanvasSource,y.GeoJSONSource,y.ImageSource,y.RasterTileSource,y.RasterDEMTileSource,y.VectorTileSource,y.VideoSource,y.NavigationControl,y.GeolocateControl,y.AttributionControl,y.LogoControl,y.ScaleControl,y.FullscreenControl,y.TerrainControl,y.BoxZoomHandler,y.ScrollZoomHandler,y.CooperativeGesturesHandler,y.KeyboardHandler,y.TwoFingersTouchPitchHandler,y.MapWheelEvent,y.MapTouchEvent,y.MapMouseEvent,y.config,y.getVersion;let{setRTLTextPlugin:r8,getRTLTextPluginStatus:r6,LngLat:r7,LngLatBounds:r9,MercatorCoordinate:ae,Evented:at,AJAXError:ar,prewarm:aa,clearPrewarmedResources:an,Hash:ao,Point:ai,EdgeInsets:al,DragRotateHandler:as,DragPanHandler:au,TwoFingersTouchZoomRotateHandler:ap,DoubleClickZoomHandler:ac,TwoFingersTouchZoomHandler:ad,TwoFingersTouchRotateHandler:ah,getWorkerCount:ay,setWorkerCount:af,getMaxParallelImageRequests:am,setMaxParallelImageRequests:ag,getWorkerUrl:av,setWorkerUrl:ab,addSourceType:ax,importScriptInWorkers:aw,addProtocol:aS,removeProtocol:ak}=y}}]);
